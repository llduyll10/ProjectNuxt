{"version":3,"file":"components/quote-form.js","sources":["webpack:///./assets/svg/CheckboxBig.svg","webpack:///./components/quote/form.vue?3638","webpack:///./components/quote/form.vue","webpack:///./components/quote/form.vue?5ae4","webpack:///./components/quote/form.vue?a601","webpack:///./components/InputFile.vue?0768","webpack:///./components/InputFile.vue","webpack:///./components/InputFile.vue?ff16","webpack:///./components/InputFile.vue?0b59","webpack:///./assets/svg/file.svg","webpack:///./assets/svg/icon-upload.svg"],"sourcesContent":["module.exports = __webpack_public_path__ + \"img/CheckboxBig.bda5924.svg\";","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.isShowForm)?_c('div',[_vm._ssrNode(\"<h3 class=\\\"h5 main-black f-14 fw-700\\\">\"+((_vm.isUpdateQuote)?(\"\\n            Cập nhật chào giá cho dự án\\n        \"):(\"\\n            Gửi chào giá cho dự án - Bạn sẽ tốn\\n            <span class=\\\"main-color\\\"><span class=\\\"f-20\\\">3</span> Tokens</span> khi tham gia chào giá\\n        \"))+\"</h3> <hr class=\\\"hr\\\"> \"),_vm._ssrNode(\"<form class=\\\"group-content\\\">\",\"</form>\",[_vm._ssrNode(\"<div class=\\\"form-group row mb-25px align-items-center\\\">\",\"</div>\",[_vm._ssrNode(\"<label class=\\\"f-13 col-md-3 col-sm-12 fw-600\\\">\\n                Chi phí ước tính\\n                <span style=\\\"color:red\\\">*</span></label> \"),_vm._ssrNode(\"<div class=\\\" col-md-9 col-sm-12\\\">\",\"</div>\",[_vm._ssrNode(\"<div class=\\\"input-group\\\">\",\"</div>\",[_c('currency-input',{staticClass:\"form-control\",attrs:{\"type\":\"text\",\"required\":\"\",\"placeholder\":\"200,000,000\"},model:{value:(_vm.objForm.price),callback:function ($$v) {_vm.$set(_vm.objForm, \"price\", $$v)},expression:\"objForm.price\"}}),_vm._ssrNode(\" <div class=\\\"input-group-append\\\"><span class=\\\"input-group-text f-12\\\">VND</span></div>\")],2),_vm._ssrNode(\" <p class=\\\"mb-0 mt-5px f-12 main-black\\\">\\n                    Phí hoa hồng nếu trúng thầu -\\n                    <span class=\\\"main-color fw-600\\\">500</span> <span class=\\\"fw-600\\\">Tokens</span></p>\")],2)],2),_vm._ssrNode(\" <div class=\\\"form-group row mb-25px align-items-center\\\"><label class=\\\"f-13 col-md-3 col-sm-12 fw-600\\\">\"+_vm._ssrEscape(\"\\n                \"+_vm._s(_vm.isUpdateQuote ? 'Giải pháp đề xuất và lý do tại sao báo giá lại cao/thấp hơn giá ước lượng ban đầu' : 'Kinh nghiệm, Năng lực và giải pháp đề xuất')+\"\\n\\n                \")+\"<span style=\\\"color:red\\\">*</span></label> <div class=\\\"col-md-9 col-sm-12\\\"><textarea required=\\\"required\\\" id=\\\"customPlaceholder\\\" rows=\\\"5\\\"\"+(_vm._ssrAttr(\"placeholder\",_vm.place))+\" class=\\\"form-control main-black \\\">\"+_vm._ssrEscape(_vm._s(_vm.objForm.description))+\"</textarea></div></div> <div class=\\\"form-group row mb-25px align-items-center\\\"><label class=\\\"f-13 col-md-3 col-sm-12 fw-600 mb-0\\\">\\n                Thời gian thi công dự trù\\n                <span style=\\\"color:red\\\">*</span></label> <div class=\\\"col-md-3 col-sm-12 \\\"><div class=\\\"input-group\\\"><input type=\\\"text\\\"\"+(_vm._ssrAttr(\"value\",(_vm.objForm.day)))+\" class=\\\"form-control \\\"> <div class=\\\"input-group-append\\\"><span class=\\\"input-group-text py-0 px-10px f-12\\\">Ngày</span></div></div></div></div> \"+((_vm.isUpdateQuote)?((_vm._ssrList((_vm.objForm.payments),function(item,idx){return (\"<div class=\\\"form-group row mb-25px align-items-center\\\"><label class=\\\"f-13 col-md-3 col-sm-12 fw-600\\\">\"+_vm._ssrEscape(\"\\n                        Thanh toán đợt \"+_vm._s(idx+1)+\"\\n                        \")+\"<span style=\\\"color:red\\\">*</span></label> <div class=\\\" col-md-9 col-sm-12 d-flex\\\"><div style=\\\"width:200px\\\"><input type=\\\"text\\\" required=\\\"required\\\" placeholder=\\\"200,000,000\\\"\"+(_vm._ssrAttr(\"value\",(item.value)))+\" class=\\\"form-control\\\"></div> \"+((_vm.objForm.payments.length == 1)?(\"<span class=\\\"ml-10px mt-7px text-main f-12 cursor-pointer\\\">Thêm đề nghị thanh toán</span>\"):(((idx+1 == _vm.objForm.payments.length)?(\"<span class=\\\"ml-10px mt-7px text-main f-12 cursor-pointer\\\">Thêm đề nghị thanh toán</span>\"):(\"<span class=\\\"text-red mt-3px ml-5px cursor-pointer\\\"><i class=\\\"fas fa-times\\\"></i></span>\"))))+\"</div></div>\")}))):\"<!---->\")+\" \"),_vm._ssrNode(\"<div class=\\\"form-group row mb-25px align-items-center\\\">\",\"</div>\",[_vm._ssrNode(\"<label class=\\\"f-13 col-md-3 col-sm-12 fw-600\\\">\\n                Tài liệu đính kèm\\n            </label> \"),_vm._ssrNode(\"<div class=\\\"col-md-9 col-sm-12\\\">\",\"</div>\",[_c('InputFile',{attrs:{\"accept\":_vm.accepFile,\"multiple\":true,\"label\":'Thêm tài liệu'},on:{\"input\":_vm.getFile}}),_vm._ssrNode(\" \"+((_vm.arrFile.length)?(\"<div class=\\\"col-md-3\\\"></div>\"):\"<!---->\")+\" \"+((_vm.arrFile.length)?(\"<div class=\\\"col-md-9 pl-0\\\">\"+(_vm._ssrList((_vm.arrFile),function(item,idx){return (\"<p class=\\\"f-11 text-main \\\"><span class=\\\"mr-5px\\\">\"+(_vm._s(_vm.returnTypeFile(item.name)))+\"</span>\"+_vm._ssrEscape(\"\\n                            \"+_vm._s(item.name)+\"\\n                            \")+\"<span class=\\\"cursor-pointer ml-5px\\\"><i class=\\\"fas fa-times text-red\\\"></i></span></p>\")}))+\"</div>\"):\"<!---->\"))],2)],2),_vm._ssrNode(\" \"),_vm._ssrNode(\"<div class=\\\"form-group mb-50px group-checkbox d-flex\\\">\",\"</div>\",[_c('b-form-checkbox',{attrs:{\"name\":\"checkbox-agree\",\"required\":\"\"},model:{value:(_vm.objForm.agree),callback:function ($$v) {_vm.$set(_vm.objForm, \"agree\", $$v)},expression:\"objForm.agree\"}}),_vm._ssrNode(\" <span class=\\\"f-12 main-black mt-2px ml-5px\\\">Tôi đồng ý với <span class=\\\"main-color\\\">điều khoản</span> của Econs <span style=\\\"color:red\\\">*</span></span>\")],2),_vm._ssrNode(\" <div class=\\\"group-btn\\\"><div class=\\\"d-flex mt-25px justify-content-xl-around row\\\"><div class=\\\"col-md-6 col-sm-12\\\"><button type=\\\"submit\\\" class=\\\" btn btn-primary main-bg-color radius-5 w-100  text-16 fw-700\\\">\"+_vm._ssrEscape(\"\\n                    \"+_vm._s(_vm.isUpdateQuote ? 'CẬP NHẬT BÁO GIÁ' :'GỬI CHÀO GIÁ NGAY')+\"\\n                \")+\"</button></div> <div class=\\\"col-md-6 col-sm-12\\\"><button type=\\\"button\\\" class=\\\" btn btn-primary main-bg-color radius-5 w-100  btn-brown text-16 pr-0 fw-700\\\">\\n                    LƯU BẢN NHÁP\\n                </button></div></div></div>\")],2)],2):_c('div',[_vm._ssrNode(\"<div class=\\\"text-center\\\"><img\"+(_vm._ssrAttr(\"src\",require(\"@/assets/svg/CheckboxBig.svg\")))+\"> \"+((_vm.$auth.loggedIn && _vm.$auth.user.canAuction)?(\"<p class=\\\"f-19 main-black fw-600\\\">Bạn đã gửi chào giá cho\\n            <span class=\\\"text-main\\\">\"+_vm._ssrEscape(_vm._s(_vm.quoteName))+\"</span></p>\"):\"<!---->\")+\" \"+((!_vm.$auth.loggedIn)?(\"<p class=\\\"f-19 main-black fw-600\\\">\\n            Vui lòng đăng nhập để chào giá\\n        </p>\"):\"<!---->\")+\" \"+((_vm.$auth.loggedIn && !_vm.$auth.user.canAuction)?(\"<p class=\\\"f-19 main-black fw-600\\\">\\n            Vui lòng hoàn thành hồ sơ và xác thực tài khoản\\n        </p>\"):\"<!---->\")+\"</div>\")])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    props:['id','quoteName',\"detailProject\"],\n    data(){\n        return{\n            place: `1. Mô tả chi tiết về dự án xây dựng hoặc yêu cầu thiết kế của bạn \\n2. Vui lòng đính kèm sổ đỏ, bản vẽ, thiết kế hoặc hình ảnh minh hoạ để nhận được tư vấn/dự toán tốt nhất. \\n3. Yêu cầu năng lực của đơn vị báo giá hoặc những yêu cầu khác`,\n            objForm:{\n                agree:false,\n            },\n            accepFile:[\"png\", \"jpg\", \"tiff\", \"pdf\", \"xls\", \"doc\", \"ppt\", \"zip\", \"rar\"],\n            arrFile:[],\n            isShowForm:false,\n            isUpdateQuote:false,\n        }\n    },\n    mounted(){\n        this.getQuote()\n    },\n    methods:{\n        getQuote(){\n            if(this.$auth && this.$auth.user && this.$auth.user.canAuction){\n                this.$get(`member/auction/project/${this.id}`)\n                .then(res =>{\n                    if(res.data.status){\n                        if(res.data.auction){\n                            if(res.data.auction.status == 'DRAFT'){\n                                this.objForm = {...res.data.auction}\n                                this.isShowForm = true;\n                            }else{\n                                if(res.data.auction.step === 1 && res.data.auction.survey.length && res.data.auction.statusUpdate == 'DRAFT'){\n                                    this.objForm = {...res.data.auction,payments: res.data.auction.payments.length ? res.data.auction.payments : [{key:1,value:0}]};\n                                    this.isShowForm = true;\n                                    this.isUpdateQuote = true;\n                                }else{\n                                    this.isShowForm = false;\n                                }\n\n                            }\n                        }else{\n                            this.isShowForm = true;\n                        }\n                    }\n                })\n                .catch(err => {\n                    console.log(err)\n                })\n            }else{\n                this.isShowForm = false;\n            }\n\n        },\n        async createQuote(status){\n            this.loader()\n            try{\n                var arrFile = this.arrFile.length ? await this.uploadFile(this.arrFile) : []\n                var obj = {\n                            ...this.objForm,\n                            day: Number(this.objForm.day),\n                            attachments:arrFile,\n                            projectOwner:this.detailProject.createBy._id\n                        }\n                console.log(obj);\n                var url = `member/auction/project/${this.id}`;\n                if(this.isUpdateQuote){\n                    obj.statusUpdate = status;\n                    obj.step = 2;\n                }else{\n                    obj.status = status;\n                }\n                let res = await this.$post(url,obj)\n                console.log('res',res)\n                this.resetForm()\n                this.getQuote()\n                this.loader(0)\n                this.$emit('callGetList')\n                this.$auth.fetchUser();\n            }\n            catch(err){\n                console.log(err)\n                this.loader(0)\n            }\n        },\n        resetForm(){\n            this.objForm = {}\n            this.arrFile = []\n        },\n        getFile(file){\n            this.arrFile = this.arrFile.concat(file)\n        },\n        clearFile(file){\n            this.arrFile = this.arrFile.filter(item => item.name !== file.name)\n        },\n        addPayment(){\n            var length = this.objForm.payments.length\n            var obj = {key:length,value:0}\n            this.objForm.payments.push(obj)\n        },\n        clearPayment(item){\n            if(this.objForm.payments.length == 1) return\n            this.objForm.payments = this.objForm.payments.filter(pay => pay.key != item.key)\n        }\n    }\n\n}\n","import mod from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/babel-loader/lib/index.js??ref--2-0!../../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./form.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./form.vue?vue&type=template&id=4a356c88&\"\nimport script from \"./form.vue?vue&type=script&lang=js&\"\nexport * from \"./form.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"801a3e5c\"\n  \n)\n\nexport default component.exports\n\n/* nuxt-component-imports */\ninstallComponents(component, {InputFile: require('/Users/alex/econs-frontend/components/InputFile.vue').default})\n","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_vm._ssrNode(\"<input type=\\\"file\\\"\"+(_vm._ssrAttr(\"multiple\",_vm.multiple))+(_vm._ssrClass(\"inputfile\",_vm.isChat ? 'w-40' : ''))+\"> <label\"+(_vm._ssrClass(null,_vm.isChat ? 'bg-white mb-0' : ''))+\">\"+((_vm.isChat)?(\"<img\"+(_vm._ssrAttr(\"src\",require(\"@/assets/svg/file.svg\")))+\" alt>\"):(\"<img\"+(_vm._ssrAttr(\"src\",require(\"@/assets/svg/icon-upload.svg\")))+\" alt class=\\\"mr-4px h-13px mb-2px\\\">\"+_vm._ssrEscape(\"\\n            \"+_vm._s(_vm.label)+\"\\n        \")))+\"</label> \"+((!_vm.isChat)?(\"<span class=\\\"text-main f-11 font-italic\\\">\"+(_vm._ssrList((_vm.accept),function(item,idx){return (_vm._ssrEscape(\"\\n           \"+_vm._s(item)+\" \")+(((idx+1) < _vm.accept.length)?(\"<span>,</span>\"):\"<!---->\"))}))+\"</span>\"):\"<!---->\")+\" \"+((_vm.showAlert)?(\"<small class=\\\"text-danger d-block\\\">Sai định dạng</small>\"):\"<!---->\"))])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n    props:['accept','multiple','label','isChat'],\n    created() {},\n    mounted() {},\n    data() {\n        return{\n            showAlert:false\n        }\n    },\n    methods:{\n        onFileChange(){\n            var arrFile = [];\n            let files = this.$refs.file.files;\n            let accept = this.accept\n            if(files && files.length){\n                var typeFile = files[0].name.split('.').pop()\n            }\n            if(accept){\n                if(!accept.includes(typeFile)){\n                    this.showAlert = true\n                    return\n                }\n                else{\n                    this.showAlert = false\n                    files.forEach(e => {\n                        arrFile.push(e)\n                    });\n                    this.$emit(\"input\",this.multiple?arrFile:arrFile[0]);\n                    this.$refs.file.value = null;\n                }\n            }\n\n        },\n    }\n};\n","import mod from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputFile.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/babel-loader/lib/index.js??ref--2-0!../node_modules/@nuxt/components/dist/loader.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./InputFile.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./InputFile.vue?vue&type=template&id=15adf062&\"\nimport script from \"./InputFile.vue?vue&type=script&lang=js&\"\nexport * from \"./InputFile.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"dbfd3b8a\"\n  \n)\n\nexport default component.exports","module.exports = __webpack_public_path__ + \"img/file.0c843c8.svg\";","module.exports = __webpack_public_path__ + \"img/icon-upload.762d37f.svg\";"],"mappings":";;;;;;AAAA;;;;;;;;;;;;ACAA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;AChLA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;ACrBA;AACA;AACA;;;;;ACFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;;ACrBA;;;;;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;AClBA;;;;;;;ACAA;;;;A","sourceRoot":""}