(window.webpackJsonp=window.webpackJsonp||[]).push([[1,18,23,33,34,70],{401:function(t,e,n){"use strict";n.r(e);n(9),n(22),n(21),n(63),n(96),n(2);var r={props:["accept","multiple","label","isChat"],created:function(){},mounted:function(){},data:function(){return{showAlert:!1}},methods:{onFileChange:function(){var t=[],e=this.$refs.file.files,n=this.accept;if(e&&e.length)var r=e[0].name.split(".").pop();if(n){if(!n.includes(r))return void(this.showAlert=!0);this.showAlert=!1,e.forEach((function(e){t.push(e)})),this.$emit("input",this.multiple?t:t[0]),this.$refs.file.value=null}}}},o=n(41),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("input",{ref:"file",staticClass:"inputfile",class:t.isChat?"w-40":"",attrs:{type:"file",multiple:t.multiple},on:{change:t.onFileChange}}),t._v(" "),r("label",{class:t.isChat?"bg-white mb-0":"",on:{click:function(e){return t.$refs.file.click()}}},[t.isChat?[r("img",{attrs:{src:n(402),alt:""}})]:[r("img",{staticClass:"mr-4px h-13px mb-2px",attrs:{src:n(403),alt:""}}),t._v("\n            "+t._s(t.label)+"\n        ")]],2),t._v(" "),t.isChat?t._e():r("span",{staticClass:"text-main f-11 font-italic"},[t._l(t.accept,(function(e,n){return[t._v("\n           "+t._s(e)+" "),n+1<t.accept.length?r("span",{key:n},[t._v(",")]):t._e()]}))],2),t._v(" "),t.showAlert?r("small",{staticClass:"text-danger d-block"},[t._v("Sai định dạng")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},402:function(t,e,n){t.exports=n.p+"img/file.0c843c8.svg"},403:function(t,e,n){t.exports=n.p+"img/icon-upload.762d37f.svg"},406:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTciIHZpZXdCb3g9IjAgMCAxNyAxNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuMzQzNjYgMTUuMzQwN0wwIDguOTk2NTZMMy4wMjU0NyA1Ljk3MTA5TDYuMzQzNjYgOS4yODkyOEwxMy45NzQ1IDEuNjU4OTRMMTcgNC42ODQ0TDYuMzQzNjYgMTUuMzQwN1oiIGZpbGw9IiMxOThBQzYiLz4KPC9zdmc+Cg=="},416:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(1),n(5),n(2),n(6);var r=n(0);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={props:["rating","report","noClick"],name:"Rating",data:function(){return{}},methods:{emitRating:function(t){if(!this.noClick){var e=c(c({},this.report),{},{rating:t});this.$emit("rating",e)}}}},m=n(41),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"group-star d-flex",attrs:{id:"rating-component"}},[t.rating?[t._l(t.rating,(function(e,r){return n("i",{key:r,staticClass:"fas fa-star mr-1px f-13 main-yellow",on:{click:function(e){return t.emitRating(r)}}})})),t._v(" "),t._l(5-t.rating,(function(e,r){return n("i",{key:r+50,staticClass:"fas fa-star mr-1px f-13 ",on:{click:function(e){return t.emitRating(r+t.rating)}}})}))]:t._l(5,(function(e,r){return n("i",{key:r,staticClass:"fas fa-star mr-1px f-13 ",on:{click:function(e){return t.emitRating(r)}}})}))],2)}),[],!1,null,null,null);e.default=component.exports},490:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTIuMjA3M0w0LjcwNzM2IDcuNDk5OTZMMCAyLjc5MjY4TDIuNzkyNjggMEw3LjUwMDA0IDQuNzA3MzZMMTIuMjA3MyAwTDE1IDIuNzkyNjhMMTAuMjkyNiA3LjUwMDA0TDE1IDEyLjIwNzNMMTIuMjA3MyAxNUw3LjQ5OTk2IDEwLjI5MjZMMi43OTI2IDE1TDAgMTIuMjA3M1oiIGZpbGw9IiNEODAwMDAiLz4KPC9zdmc+Cg=="},517:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(1),n(5),n(6);var r=n(0);n(2);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={props:["auction","detailProject"],data:function(){return{statusPayment:1,activeRow:0,activeReport:0,arrRequiredPayment:[],arrReport:[]}},mounted:function(){this.getPaymentByAuction(),this.getReportByAuction()},methods:{getObjRequiredPayment:function(t){var e=this,n=c(c({},t),{},{paymentId:n?n.paymentId:this.activeRow,project:this.auction.deal[0].project,auction:this.auction.deal[0].auction,ownerProject:this.detailProject.createBy._id});this.loader(),this.$post("member/payments",n).then((function(t){var n={project:e.auction.deal[0].project,auction:e.auction.deal[0].auction};return e.$post("member/payments-by-auction",n)})).then((function(t){e.arrRequiredPayment=t.data,e.auction.deal[0].payments.forEach((function(t){return delete t.paymentAuction})),e.mapAuction(),e.loader(0)})).catch((function(t){e.loader(0)}))},getPaymentByAuction:function(){var t=this,e={project:this.auction.deal[0].project,auction:this.auction.deal[0].auction};this.$post("member/payments-by-auction",e).then((function(e){t.arrRequiredPayment=e.data,t.mapAuction()})).catch((function(t){console.log(t)}))},mapAuction:function(){var t=JSON.parse(JSON.stringify(this.auction.deal[0].payments))||[],e=JSON.parse(JSON.stringify(this.arrRequiredPayment))||[];t.forEach((function(t,n){e.forEach((function(e){n==e.paymentId&&(t.paymentAuction=e)}))})),this.auction.deal[0].payments=t},getCreateReport:function(t){var e=this;this.loader();var n=c(c({},t),{},{project:this.auction.deal[0].project,auction:this.auction.deal[0].auction,ownerProject:this.detailProject.createBy._id});this.$post("member/reports",n).then((function(t){console.log("reports",t);var n={project:e.auction.deal[0].project,auction:e.auction.deal[0].auction};return e.$post("member/reports-by-auction",n)})).then((function(t){e.arrReport=t.data,e.auction.deal[0].payments.forEach((function(t){return delete t.reportAuction})),e.mapReport(),e.loader(0)})).catch((function(t){console.log(t),e.loader(0)}))},getReportByAuction:function(){var t=this,e={project:this.auction.deal[0].project,auction:this.auction.deal[0].auction};this.$post("member/reports-by-auction",e).then((function(e){console.log("getReportByAuction",e),t.arrReport=e.data,t.mapReport()})).catch((function(t){console.log(t)}))},mapReport:function(){var t=JSON.parse(JSON.stringify(this.auction.deal[0].payments))||[],e=JSON.parse(JSON.stringify(this.arrReport))||[];t.forEach((function(t,n){e.forEach((function(e){n==e.reportId&&(t.reportAuction=e)}))})),this.auction.deal[0].payments=t,console.log("mapReport",this.auction.deal[0].payments)},openModalReport:function(t){this.activeReport=t+1,this.$refs.createReport.updaetObjectReport({}),this.$refs.createReport.show()},openModalUpdateReport:function(t,e){this.activeReport=e+1,this.$refs.createReport.updaetObjectReport(t),this.$refs.createReport.show()},openModalRequired:function(t){this.$refs.createRequired.show(),this.$refs.createRequired.updateObjectRequired({}),this.activeRow=t},openModalRequiredUpdate:function(t,e){this.activeRow=e,this.$refs.createRequired.updateObjectRequired(t),this.$refs.createRequired.show()},hideModal:function(){this.$refs.createRequired.hide()}}},m=n(41),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.auction?r("div",{staticClass:"detail-payment-component"},[r("div",{staticClass:"group-payment"},[r("p",{staticClass:"fw-600 f-16 mb-16px"},[t._v("Thanh toán")]),t._v(" "),t._l(t.auction.deal[0].payments,(function(e,o){return r("div",{key:o,staticClass:"d-flex"},[r("span",{staticClass:"item",staticStyle:{width:"15%"}},[t._v("Thanh toán đợt "+t._s(o+1))]),t._v(" "),r("span",{staticClass:"item text-left fw-600",staticStyle:{width:"25%"}},[t._v(t._s(e.value))]),t._v(" "),t.arrRequiredPayment&&e.paymentAuction?r("span",{staticClass:"item text-left  fw-600 text-main cursor-pointer",staticStyle:{width:"20%","text-decoration":"underline"},on:{click:function(n){return t.openModalRequiredUpdate(e.paymentAuction,o)}}},[t._v("\n                Đề nghị thanh toán_Đợt "+t._s(o+1)+"\n            ")]):r("span",{staticClass:"item text-left cursor-pointer  text-main",staticStyle:{width:"20%"},on:{click:function(e){return t.openModalRequired(o)}}},[t._v("\n                Tạo yêu cầu thanh toán\n            ")]),t._v(" "),t.arrRequiredPayment&&e.paymentAuction?r("span",{staticClass:"item text-center fw-600 text-main",staticStyle:{width:"20%"}},[t._v("\n                "+t._s(t.formatVnd(e.paymentAuction.price))+" VND\n            ")]):r("span",{staticClass:"item",staticStyle:{width:"40%"}}),t._v(" "),t.arrRequiredPayment&&e.paymentAuction&&"DRAFT"!=e.paymentAuction.status?["DONE"==e.paymentAuction.status?r("span",{staticClass:"item fw-600 text-main",staticStyle:{width:"20%"}},[r("img",{attrs:{src:n(406),alt:""}}),t._v(" Đã thanh toán\n                ")]):"PENDING"==e.paymentAuction.status?r("span",{staticClass:"item fw-600 text-red",staticStyle:{width:"20%"}},[r("img",{staticClass:"mb-2px",attrs:{src:n(490),alt:""}}),t._v(" Chưa thanh toán\n                ")]):"CANCEL"==e.paymentAuction.status?r("span",{staticClass:"item fw-600 text-red",staticStyle:{width:"20%"}},[r("img",{staticClass:"mb-2px",attrs:{src:n(490),alt:""}}),t._v(" Từ chối thanh toán\n                ")]):t._e()]:[r("span",{staticClass:"item",staticStyle:{width:"20%"}})]],2)}))],2),t._v(" "),r("div",{staticClass:"group-progress"},[r("p",{staticClass:"fw-600 f-16 mt-25px mb-16px"},[t._v("Báo cáo tiến độ")]),t._v(" "),t._l(t.auction.deal[0].payments,(function(e,n){return r("div",{key:n,staticClass:"d-flex"},[r("span",{staticClass:"item",staticStyle:{width:"15%"}},[t._v(t._s(n+1)+". Tuần "+t._s(n+1))]),t._v(" "),t.arrReport.length&&e.reportAuction?r("span",{staticClass:"item text-left fw-600 cursor-pointer text-main  ",staticStyle:{width:"25%","text-decoration":"underline"},on:{click:function(r){return t.openModalUpdateReport(e.reportAuction,n)}}},[t._v("\n                Tiến độ thi công tuần thứ "+t._s(n+1)+"\n            ")]):r("span",{staticClass:"item text-left fw-500 cursor-pointer text-main",staticStyle:{width:"25%"},on:{click:function(e){return t.openModalReport(n)}}},[t._v("\n                Báo cáo tiến độ\n            ")]),t._v(" "),t.arrReport.length&&e.reportAuction&&"DRAFT"!==e.reportAuction.status?r("span",{staticClass:"item d-flex",staticStyle:{width:"60%"}},[t._v("\n                Khách hàng đánh giá:\n                "),r("Rating",{attrs:{rating:e.reportAuction.rating?e.reportAuction.rating:0,noClick:!0}})],1):t._e()])}))],2),t._v(" "),r("PopupPaymentCreateRequired",{ref:"createRequired",attrs:{project:t.detailProject,activeRow:t.activeRow},on:{requiredPayment:t.getObjRequiredPayment}}),t._v(" "),r("PopupPaymentCreateReport",{ref:"createReport",attrs:{project:t.detailProject,activeReport:t.activeReport},on:{createReport:t.getCreateReport}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Rating:n(416).default,PopupPaymentCreateRequired:n(518).default,PopupPaymentCreateReport:n(519).default})},518:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(1),n(5),n(2),n(6);var r=n(0);function o(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c={props:["project","activeRow"],data:function(){return{objPayment:{}}},methods:{sendRequirePayment:function(){console.log("sendRequirePayment",this.objPayment),this.$emit("requiredPayment",this.objPayment),this.hide()},updateObjectRequired:function(t){this.objPayment=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?o(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):o(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t)},triggerForm:function(t){this.objPayment.status="DRAFT"==t?"DRAFT":"PENDING",this.$refs.btnSubmit.click()},show:function(){this.$refs.createRequired.showModal()},hide:function(){this.$refs.createRequired.hideModal()}}},l=n(41),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"createRequired",attrs:{id:"modal-payment-required"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"modal-contact formCore"},[n("div",{staticClass:"content"},[n("p",{staticClass:"title f-20 fw-600"},[t._v("\n            TẠO YÊU CẦU THANH TOÁN ĐỢT "+t._s(t.activeRow+1)+"\n        ")]),t._v(" "),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.sendRequirePayment()}}},[n("div",{staticClass:"group-infor no-border pr-60px"},[n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên dự án")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("span",{staticClass:"value",class:t.getClassCategory(t.mapImgFromCategory(t.project.category))},[t._v("\n                            "+t._s(t.project.name)+"\n                        ")])])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhân viên yêu cầu")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameStaff,expression:"objPayment.nameStaff"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameStaff},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameStaff",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Giá trị thanh toán")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("div",{staticClass:"input-group "},[n("currency-input",{staticClass:"form-control",attrs:{type:"text",required:""},model:{value:t.objPayment.price,callback:function(e){t.$set(t.objPayment,"price",e)},expression:"objPayment.price"}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text f-12"},[t._v("VND")])])],1)])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Ghi chú thanh toán")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.note,expression:"objPayment.note"}],staticClass:"form-control",attrs:{type:"text",required:"",rows:"5"},domProps:{value:t.objPayment.note},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"note",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên ngân hàng")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameBank,expression:"objPayment.nameBank"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameBank},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameBank",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên chủ tài khoản")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameAccountBank,expression:"objPayment.nameAccountBank"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameAccountBank},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameAccountBank",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Số tài khoản")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.accountNumber,expression:"objPayment.accountNumber"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.accountNumber},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||t.$set(t.objPayment,"accountNumber",e.target.value)}}})])])]),t._v(" "),t.objPayment&&"DONE"!=t.objPayment.status?n("div",{staticClass:"footer d-flex"},[n("button",{ref:"btnSubmit",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),n("div",{staticClass:"btn-confirm flex-1",on:{click:function(e){return t.triggerForm("CREATE")}}},[n("span",[t._v("TẠO YÊU CẦU THANH TOÁN")])]),t._v(" "),n("div",{staticClass:"btn-confirm update flex-1 ml-25px",on:{click:function(e){return t.triggerForm("DRAFT")}}},[n("span",[t._v("LƯU BẢN NHÁP")])])]):t._e()])])])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:n(253).default})},519:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(5),n(6);var r=n(0),o=n(19);n(53),n(159),n(10),n(2),n(21),n(1);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:["project","activeReport"],data:function(){return{acceptFile:["png","jpg","jpeg","tiff"],objReport:{},arrFile:[],arrBase64:[]}},watch:{activeReport:function(){this.objReport.time="Tuần "+Number(this.activeReport)}},methods:{getForm:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.arrFile.length){e.next=6;break}return e.next=3,t.uploadFile(t.arrFile);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=[];case 7:n=e.t0,r=t.objReport.attachment||[],o=r.concat(n),c=l(l({},t.objReport),{},{reportId:t.activeReport-1,attachment:o}),t.$emit("createReport",c),t.hide();case 13:case"end":return e.stop()}}),e)})))()},updaetObjectReport:function(t){this.objReport=t},triggerForm:function(t){this.objReport.status=t,this.$refs.btnSubmitReport.click()},getFile:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.arrFile=e.arrFile.concat(t),r=[],e.arrFile.forEach(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._toBase64(n);case 2:o=t.sent,r.push({base64:o,name:n.name});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.arrBase64=r;case 4:case"end":return n.stop()}}),n)})))()},clearFile:function(t){this.arrBase64=this.arrBase64.filter((function(e){return e.base64!==t.base64})),this.arrFile=this.arrFile.filter((function(e){return e.name!==t.name}))},clearFileOld:function(t){this.objReport.attachment=this.objReport.attachment.filter((function(e){return e!==t}))},show:function(){this.$refs.modalCreateReport.showModal()},hide:function(){this.$refs.modalCreateReport.hideModal(),this.arrFile=[],this.arrBase64=[]}}},d=n(41),component=Object(d.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"modalCreateReport",attrs:{id:"modal-payment-report"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"modal-contact formCore"},[n("div",{staticClass:"content"},[n("p",{staticClass:"title f-20 fw-600"},[t._v("\n            TẠO BÁO CÁO TIẾN ĐỘ THI CÔNG\n        ")]),t._v(" "),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.getForm()}}},[n("div",{staticClass:"group-infor no-border pr-60px"},[n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên dự án")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("span",{staticClass:"value text-red",class:t.getClassCategory(t.mapImgFromCategory(t.project.category))},[t._v("\n                            "+t._s(t.project.name)+"\n                        ")])])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhân viên báo cáo")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objReport.nameStaff,expression:"objReport.nameStaff"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objReport.nameStaff},on:{input:function(e){e.target.composing||t.$set(t.objReport,"nameStaff",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Thời gian")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objReport.time,expression:"objReport.time"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objReport.time},on:{input:function(e){e.target.composing||t.$set(t.objReport,"time",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-25px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhật ký công việc")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objReport.note,expression:"objReport.note"}],staticClass:"form-control",attrs:{type:"text",required:"",rows:"5"},domProps:{value:t.objReport.note},on:{input:function(e){e.target.composing||t.$set(t.objReport,"note",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Hình ảnh đính kèm")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("InputFile",{key:"file",attrs:{accept:t.acceptFile,multiple:!0,label:"Thêm hình ảnh"},on:{input:t.getFile}}),t._v(" "),t.arrFile.length?n("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.arrFile.length?n("div",[n("div",{staticClass:"row cover-img"},[t.arrBase64.length?[t._l(t.arrBase64,(function(e,r){return[n("div",{key:r+50,staticClass:"col-6 img"},[n("div",{staticClass:" item-img",style:{"background-image":"url("+e.base64+")"}},[n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFile(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])])]}))]:t._e()],2)]):t._e(),t._v(" "),t.objReport.attachment&&t.objReport.attachment.length?n("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.objReport.attachment&&t.objReport.attachment.length?n("div",[n("div",{staticClass:"row cover-img"},[t.objReport.attachment&&t.objReport.attachment.length?[t._l(t.objReport.attachment,(function(e,r){return[n("div",{key:r+100,staticClass:"col-6 img"},[n("div",{staticClass:" item-img",style:{"background-image":"url("+e+")"}},[n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFileOld(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])])]}))]:t._e()],2)]):t._e()],1)])]),t._v(" "),n("div",{staticClass:"footer d-flex"},[n("button",{ref:"btnSubmitReport",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),n("div",{staticClass:"btn-confirm flex-1",on:{click:function(e){return t.triggerForm("OK")}}},[n("span",[t._v("TẠO BÁO CÁO THI CÔNG")])]),t._v(" "),n("div",{staticClass:"btn-confirm update flex-1 ml-25px",on:{click:function(e){return t.triggerForm("DRAFT")}}},[n("span",[t._v("LƯU BẢN NHÁP")])])])])])])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputFile:n(401).default,Modal:n(253).default})}}]);