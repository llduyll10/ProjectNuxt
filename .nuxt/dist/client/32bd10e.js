(window.webpackJsonp=window.webpackJsonp||[]).push([[33,23],{401:function(t,e,r){"use strict";r.r(e);r(9),r(22),r(21),r(63),r(96),r(2);var n={props:["accept","multiple","label","isChat"],created:function(){},mounted:function(){},data:function(){return{showAlert:!1}},methods:{onFileChange:function(){var t=[],e=this.$refs.file.files,r=this.accept;if(e&&e.length)var n=e[0].name.split(".").pop();if(r){if(!r.includes(n))return void(this.showAlert=!0);this.showAlert=!1,e.forEach((function(e){t.push(e)})),this.$emit("input",this.multiple?t:t[0]),this.$refs.file.value=null}}}},o=r(41),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("input",{ref:"file",staticClass:"inputfile",class:t.isChat?"w-40":"",attrs:{type:"file",multiple:t.multiple},on:{change:t.onFileChange}}),t._v(" "),n("label",{class:t.isChat?"bg-white mb-0":"",on:{click:function(e){return t.$refs.file.click()}}},[t.isChat?[n("img",{attrs:{src:r(402),alt:""}})]:[n("img",{staticClass:"mr-4px h-13px mb-2px",attrs:{src:r(403),alt:""}}),t._v("\n            "+t._s(t.label)+"\n        ")]],2),t._v(" "),t.isChat?t._e():n("span",{staticClass:"text-main f-11 font-italic"},[t._l(t.accept,(function(e,r){return[t._v("\n           "+t._s(e)+" "),r+1<t.accept.length?n("span",{key:r},[t._v(",")]):t._e()]}))],2),t._v(" "),t.showAlert?n("small",{staticClass:"text-danger d-block"},[t._v("Sai định dạng")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},402:function(t,e,r){t.exports=r.p+"img/file.0c843c8.svg"},403:function(t,e,r){t.exports=r.p+"img/icon-upload.762d37f.svg"},519:function(t,e,r){"use strict";r.r(e);r(4),r(3),r(5),r(6);var n=r(0),o=r(19);r(53),r(159),r(10),r(2),r(21),r(1);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,r)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:["project","activeReport"],data:function(){return{acceptFile:["png","jpg","jpeg","tiff"],objReport:{},arrFile:[],arrBase64:[]}},watch:{activeReport:function(){this.objReport.time="Tuần "+Number(this.activeReport)}},methods:{getForm:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var r,n,o,c;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.arrFile.length){e.next=6;break}return e.next=3,t.uploadFile(t.arrFile);case 3:e.t0=e.sent,e.next=7;break;case 6:e.t0=[];case 7:r=e.t0,n=t.objReport.attachment||[],o=n.concat(r),c=l(l({},t.objReport),{},{reportId:t.activeReport-1,attachment:o}),t.$emit("createReport",c),t.hide();case 13:case"end":return e.stop()}}),e)})))()},updaetObjectReport:function(t){this.objReport=t},triggerForm:function(t){this.objReport.status=t,this.$refs.btnSubmitReport.click()},getFile:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:e.arrFile=e.arrFile.concat(t),n=[],e.arrFile.forEach(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(r){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._toBase64(r);case 2:o=t.sent,n.push({base64:o,name:r.name});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.arrBase64=n;case 4:case"end":return r.stop()}}),r)})))()},clearFile:function(t){this.arrBase64=this.arrBase64.filter((function(e){return e.base64!==t.base64})),this.arrFile=this.arrFile.filter((function(e){return e.name!==t.name}))},clearFileOld:function(t){this.objReport.attachment=this.objReport.attachment.filter((function(e){return e!==t}))},show:function(){this.$refs.modalCreateReport.showModal()},hide:function(){this.$refs.modalCreateReport.hideModal(),this.arrFile=[],this.arrBase64=[]}}},f=r(41),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("Modal",{ref:"modalCreateReport",attrs:{id:"modal-payment-report"},scopedSlots:t._u([{key:"content",fn:function(){return[r("div",{staticClass:"modal-contact formCore"},[r("div",{staticClass:"content"},[r("p",{staticClass:"title f-20 fw-600"},[t._v("\n            TẠO BÁO CÁO TIẾN ĐỘ THI CÔNG\n        ")]),t._v(" "),r("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.getForm()}}},[r("div",{staticClass:"group-infor no-border pr-60px"},[r("div",{staticClass:"row mb-15px"},[r("div",{staticClass:"col-md-3"},[r("span",{staticClass:"key"},[t._v("Tên dự án")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("span",{staticClass:"value text-red",class:t.getClassCategory(t.mapImgFromCategory(t.project.category))},[t._v("\n                            "+t._s(t.project.name)+"\n                        ")])])]),t._v(" "),r("div",{staticClass:"row mb-15px"},[r("div",{staticClass:"col-md-3"},[r("span",{staticClass:"key"},[t._v("Nhân viên báo cáo")]),t._v(" "),r("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.objReport.nameStaff,expression:"objReport.nameStaff"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objReport.nameStaff},on:{input:function(e){e.target.composing||t.$set(t.objReport,"nameStaff",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"row mb-15px"},[r("div",{staticClass:"col-md-3"},[r("span",{staticClass:"key"},[t._v("Thời gian")]),t._v(" "),r("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.objReport.time,expression:"objReport.time"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objReport.time},on:{input:function(e){e.target.composing||t.$set(t.objReport,"time",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"row mb-25px"},[r("div",{staticClass:"col-md-3"},[r("span",{staticClass:"key"},[t._v("Nhật ký công việc")]),r("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objReport.note,expression:"objReport.note"}],staticClass:"form-control",attrs:{type:"text",required:"",rows:"5"},domProps:{value:t.objReport.note},on:{input:function(e){e.target.composing||t.$set(t.objReport,"note",e.target.value)}}})])]),t._v(" "),r("div",{staticClass:"row"},[r("div",{staticClass:"col-md-3"},[r("span",{staticClass:"key"},[t._v("Hình ảnh đính kèm")])]),t._v(" "),r("div",{staticClass:"col-md-9"},[r("InputFile",{key:"file",attrs:{accept:t.acceptFile,multiple:!0,label:"Thêm hình ảnh"},on:{input:t.getFile}}),t._v(" "),t.arrFile.length?r("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.arrFile.length?r("div",[r("div",{staticClass:"row cover-img"},[t.arrBase64.length?[t._l(t.arrBase64,(function(e,n){return[r("div",{key:n+50,staticClass:"col-6 img"},[r("div",{staticClass:" item-img",style:{"background-image":"url("+e.base64+")"}},[r("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(r){return t.clearFile(e)}}},[r("i",{staticClass:"fas fa-times text-red"})])])])]}))]:t._e()],2)]):t._e(),t._v(" "),t.objReport.attachment&&t.objReport.attachment.length?r("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.objReport.attachment&&t.objReport.attachment.length?r("div",[r("div",{staticClass:"row cover-img"},[t.objReport.attachment&&t.objReport.attachment.length?[t._l(t.objReport.attachment,(function(e,n){return[r("div",{key:n+100,staticClass:"col-6 img"},[r("div",{staticClass:" item-img",style:{"background-image":"url("+e+")"}},[r("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(r){return t.clearFileOld(e)}}},[r("i",{staticClass:"fas fa-times text-red"})])])])]}))]:t._e()],2)]):t._e()],1)])]),t._v(" "),r("div",{staticClass:"footer d-flex"},[r("button",{ref:"btnSubmitReport",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),r("div",{staticClass:"btn-confirm flex-1",on:{click:function(e){return t.triggerForm("OK")}}},[r("span",[t._v("TẠO BÁO CÁO THI CÔNG")])]),t._v(" "),r("div",{staticClass:"btn-confirm update flex-1 ml-25px",on:{click:function(e){return t.triggerForm("DRAFT")}}},[r("span",[t._v("LƯU BẢN NHÁP")])])])])])])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputFile:r(401).default,Modal:r(253).default})}}]);