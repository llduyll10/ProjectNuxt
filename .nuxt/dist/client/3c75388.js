(window.webpackJsonp=window.webpackJsonp||[]).push([[2,34],{449:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(1),n(5),n(2),n(6);var o=n(0);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c={props:["project","activeRow"],data:function(){return{objPayment:{}}},methods:{sendRequirePayment:function(){console.log("sendRequirePayment",this.objPayment),this.$emit("requiredPayment",this.objPayment),this.hide()},updateObjectRequired:function(t){this.objPayment=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t)},triggerForm:function(t){this.objPayment.status="DRAFT"==t?"DRAFT":"PENDING",this.$refs.btnSubmit.click()},show:function(){this.$refs.createRequired.showModal()},hide:function(){this.$refs.createRequired.hideModal()}}},l=n(41),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"createRequired",attrs:{id:"modal-payment-required"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"modal-contact formCore"},[n("div",{staticClass:"content"},[n("p",{staticClass:"title f-20 fw-600"},[t._v("\n            TẠO YÊU CẦU THANH TOÁN ĐỢT "+t._s(t.activeRow+1)+"\n        ")]),t._v(" "),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.sendRequirePayment()}}},[n("div",{staticClass:"group-infor no-border pr-60px"},[n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên dự án")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("span",{staticClass:"value",class:t.getClassCategory(t.mapImgFromCategory(t.project.category))},[t._v("\n                            "+t._s(t.project.name)+"\n                        ")])])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhân viên yêu cầu")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameStaff,expression:"objPayment.nameStaff"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameStaff},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameStaff",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Giá trị thanh toán")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("div",{staticClass:"input-group "},[n("currency-input",{staticClass:"form-control",attrs:{type:"text",required:""},model:{value:t.objPayment.price,callback:function(e){t.$set(t.objPayment,"price",e)},expression:"objPayment.price"}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text f-12"},[t._v("VND")])])],1)])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Ghi chú thanh toán")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.note,expression:"objPayment.note"}],staticClass:"form-control",attrs:{type:"text",required:"",rows:"5"},domProps:{value:t.objPayment.note},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"note",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên ngân hàng")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameBank,expression:"objPayment.nameBank"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameBank},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameBank",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên chủ tài khoản")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameAccountBank,expression:"objPayment.nameAccountBank"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameAccountBank},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameAccountBank",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Số tài khoản")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.accountNumber,expression:"objPayment.accountNumber"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.accountNumber},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||t.$set(t.objPayment,"accountNumber",e.target.value)}}})])])]),t._v(" "),t.objPayment&&"DONE"!=t.objPayment.status?n("div",{staticClass:"footer d-flex"},[n("button",{ref:"btnSubmit",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),n("div",{staticClass:"btn-confirm flex-1",on:{click:function(e){return t.triggerForm("CREATE")}}},[n("span",[t._v("TẠO YÊU CẦU THANH TOÁN")])]),t._v(" "),n("div",{staticClass:"btn-confirm update flex-1 ml-25px",on:{click:function(e){return t.triggerForm("DRAFT")}}},[n("span",[t._v("LƯU BẢN NHÁP")])])]):t._e()])])])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:n(253).default})},450:function(t,e,n){"use strict";n.r(e);n(10),n(1),n(21);var o={props:["project"],data:function(){return{acceptFile:["png","jpg","jpeg","tiff"],objPayment:{},arrFile:[]}},methods:{getForm:function(){console.log("getForm",this.objPayment)},triggerForm:function(t){this.$refs.btnSubmitReport.click()},getFile:function(t){this.arrFile=this.arrFile.concat(t)},clearFile:function(t){this.arrFile=this.arrFile.filter((function(e){return e.name!==t.name}))},show:function(){this.$refs.modalCreateReport.showModal()},hide:function(){this.$refs.modalCreateReport.hideModal()}}},r=n(41),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"modalCreateReport",attrs:{id:"modal-payment-report"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"modal-contact formCore"},[n("div",{staticClass:"content"},[n("p",{staticClass:"title f-20 fw-600"},[t._v("\n            TẠO BÁO CÁO TIẾN ĐỘ THI CÔNG\n        ")]),t._v(" "),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.getForm()}}},[n("div",{staticClass:"group-infor no-border pr-60px"},[n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên dự án")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("span",{staticClass:"value text-red",class:t.getClassCategory(t.mapImgFromCategory(t.project.category))},[t._v("\n                            "+t._s(t.project.name)+"\n                        ")])])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhân viên báo cáo")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameStaff,expression:"objPayment.nameStaff"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameStaff},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameStaff",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Thời gian")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.time,expression:"objPayment.time"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.time},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"time",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-25px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhật ký công việc")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.note,expression:"objPayment.note"}],staticClass:"form-control",attrs:{type:"text",required:"",rows:"5"},domProps:{value:t.objPayment.note},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"note",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Hình ảnh đính kèm")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("InputFile",{key:"file",attrs:{accept:t.acceptFile,multiple:!0,label:"Thêm hình ảnh"},on:{input:t.getFile}}),t._v(" "),t.arrFile.length?n("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.arrFile.length?n("div",{staticClass:"col-md-9 pl-0"},[t._l(t.arrFile,(function(e,o){return[n("p",{key:o,staticClass:"f-11 text-main "},[n("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e.name))}}),t._v("\n                                    "+t._s(e.name)+"\n                                    "),n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFile(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])]}))],2):t._e()],1)])]),t._v(" "),n("div",{staticClass:"footer d-flex"},[n("button",{ref:"btnSubmitReport",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),n("div",{staticClass:"btn-confirm flex-1",on:{click:function(e){return t.triggerForm("CREATE")}}},[n("span",[t._v("TẠO BÁO CÁO THI CÔNG")])]),t._v(" "),n("div",{staticClass:"btn-confirm update flex-1 ml-25px",on:{click:function(e){return t.triggerForm("DRAFT")}}},[n("span",[t._v("LƯU BẢN NHÁP")])])])])])])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputFile:n(401).default,Modal:n(253).default})},516:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(1),n(5),n(6);var o=n(0);n(2);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={props:["auction","detailProject"],data:function(){return{statusPayment:1,activeRow:0,arrRequiredPayment:[]}},mounted:function(){this.getPaymentByAuction()},methods:{getObjRequiredPayment:function(t){var e=this,n=c(c({},t),{},{paymentId:n?n.paymentId:this.activeRow,project:this.auction.deal[0].project,auction:this.auction.deal[0].auction});this.loader(),this.$post("member/payments",n).then((function(t){var n={project:e.auction.deal[0].project,auction:e.auction.deal[0].auction};return e.$post("member/payments-by-auction",n)})).then((function(t){e.arrRequiredPayment=t.data,e.auction.deal[0].payments.forEach((function(t){return delete t.paymentAuction})),e.mapAuction(),e.loader(0)})).catch((function(t){e.loader(0)}))},getPaymentByAuction:function(){var t=this,e={project:this.auction.deal[0].project,auction:this.auction.deal[0].auction};this.$post("member/payments-by-auction",e).then((function(e){t.arrRequiredPayment=e.data,t.mapAuction()})).catch((function(t){console.log(t)}))},mapAuction:function(){var t=JSON.parse(JSON.stringify(this.auction.deal[0].payments))||[],e=JSON.parse(JSON.stringify(this.arrRequiredPayment))||[];t.forEach((function(t,n){e.forEach((function(e){n==e.paymentId&&(t.paymentAuction=e)}))})),this.auction.deal[0].payments=t},openModalRequired:function(t){this.$refs.createRequired.show(),this.$refs.createRequired.updateObjectRequired({}),this.activeRow=t},openModalRequiredUpdate:function(t,e){this.activeRow=e,this.$refs.createRequired.updateObjectRequired(t),this.$refs.createRequired.show()},openModalReport:function(){this.$refs.createReport.show()},hideModal:function(){this.$refs.createRequired.hide()}}},m=n(41),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.auction?o("div",{staticClass:"detail-payment-component"},[o("div",{staticClass:"group-payment"},[o("p",{staticClass:"fw-600 f-16 mb-16px"},[t._v("Thanh toán")]),t._v(" "),t._l(t.auction.deal[0].payments,(function(e,r){return o("div",{key:r,staticClass:"d-flex"},[o("span",{staticClass:"item",staticStyle:{width:"15%"}},[t._v("Thanh toán đợt "+t._s(r+1))]),t._v(" "),o("span",{staticClass:"item text-center fw-600",staticStyle:{width:"25%"}},[t._v(t._s(e.value))]),t._v(" "),t.arrRequiredPayment&&e.paymentAuction?o("span",{staticClass:"item text-center text-underline fw-600 text-main cursor-pointer",staticStyle:{width:"20%","text-decoration":"underline"},on:{click:function(n){return t.openModalRequiredUpdate(e.paymentAuction,r)}}},[t._v("\n                Đề nghị thanh toán_Đợt "+t._s(r+1)+"\n            ")]):o("span",{staticClass:"item text-center cursor-pointer  text-main",staticStyle:{width:"20%"},on:{click:function(e){return t.openModalRequired(r)}}},[t._v("\n                Tạo yêu cầu thanh toán\n            ")]),t._v(" "),t.arrRequiredPayment&&e.paymentAuction?o("span",{staticClass:"item text-center fw-600 text-main",staticStyle:{width:"20%"},on:{click:function(e){return t.openModalReport()}}},[t._v("\n                "+t._s(t.formatVnd(e.paymentAuction.price))+" VND\n            ")]):o("span",{staticClass:"item",staticStyle:{width:"40%"},on:{click:function(e){return t.openModalReport()}}}),t._v(" "),t.arrRequiredPayment&&e.paymentAuction&&"DRAFT"!=e.paymentAuction.status?["DONE"==e.paymentAuction.status?o("span",{staticClass:"item fw-600 text-main",staticStyle:{width:"20%"}},[o("img",{attrs:{src:n(405),alt:""}}),t._v(" Đã thanh toán\n                ")]):"PENDING"==e.paymentAuction.status?o("span",{staticClass:"item fw-600 text-red",staticStyle:{width:"20%"}},[o("img",{staticClass:"mb-2px",attrs:{src:n(415),alt:""}}),t._v(" Chưa thanh toán\n                ")]):"CANCEL"==e.paymentAuction.status?o("span",{staticClass:"item fw-600 text-red",staticStyle:{width:"20%"}},[o("img",{staticClass:"mb-2px",attrs:{src:n(415),alt:""}}),t._v(" Từ chối thanh toán\n                ")]):t._e()]:[o("span",{staticClass:"item",staticStyle:{width:"20%"}})]],2)}))],2),t._v(" "),o("div",{staticClass:"group-progress"},[o("p",{staticClass:"fw-600 f-16 mt-25px mb-16px"},[t._v("Báo cáo tiến độ")]),t._v(" "),t._l(t.auction.deal[0].payments,(function(e,n){return o("div",{key:n,staticClass:"d-flex"},[o("span",{staticClass:"item",staticStyle:{width:"15%"}},[t._v(t._s(n+1)+". Tuần "+t._s(n+1))]),t._v(" "),o("span",{staticClass:"item text-center fw-600",staticStyle:{width:"25%"}},[t._v("Tiến độ thi công tuần thứ "+t._s(n+1))]),t._v(" "),o("span",{staticClass:"item d-flex",staticStyle:{width:"60%"}},[t._v("\n                Đánh giá:\n                "),o("div",{staticClass:"group-star"},t._l(5,(function(t,e){return o("i",{key:e+10,staticClass:"fas fa-star mr-1px f-13 main-yellow"})})),0)])])}))],2),t._v(" "),o("PopupPaymentCreateRequired",{ref:"createRequired",attrs:{project:t.detailProject,activeRow:t.activeRow},on:{requiredPayment:t.getObjRequiredPayment}}),t._v(" "),o("PopupPaymentCreateReport",{ref:"createReport",attrs:{project:t.detailProject}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PopupPaymentCreateRequired:n(449).default,PopupPaymentCreateReport:n(450).default})},571:function(t,e,n){"use strict";n.r(e);var o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"evaluate f-12 mb-0  ml-4px"},[t._v("\n                            ("),n("span",{staticClass:"main-yellow"},[t._v("4")]),t._v(" đánh giá)\n                        ")])},function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"group-btn"},[o("div",{staticClass:"btn-send  mr-10px ml-0"},[o("img",{attrs:{src:n(404),alt:""}}),t._v(" "),o("span",[t._v("Gửi tin nhắn")])])])}],r={props:["company","detailProject","rawCategory","bgWhite"],data:function(){return{}},mounted:function(){},methods:{getPageAgain:function(){this.$emit("getDetailAgain")}}},c=n(41),component=Object(c.a)(r,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"company-quote-owner",class:[t.company&&t.company.survey.length?"active":"border-0",t.bgWhite?"bg-white":""]},[o("div",{staticClass:"row cover"},[o("div",{staticClass:"col-md-6 col-sm-12   pr-0 "},[o("div",{staticClass:"d-flex content-left"},[o("div",[t.company.auctionBy&&t.company.auctionBy.photo?o("img",{attrs:{src:t.company.auctionBy.photo,width:"70"}}):o("div",{staticClass:"cover-img"},[o("span",[t._v(" "+t._s(t.company.auctionBy.company.slice(0,1).toUpperCase()||t.company.auctionBy.name.slice(0,1).toUpperCase()))])])]),t._v(" "),o("div",{staticClass:"ml-1 ml-16px",staticStyle:{width:"100%"}},[o("div",{staticClass:"mb-0 f-14 fw-600 main-black d-flex justify-content-between"},[o("p",{staticClass:"mb-0"},[t._v(t._s(t.company.auctionBy.company||t.company.auctionBy.name))]),t._v(" "),o("div",[o("img",{attrs:{src:n(406)}}),t._v(" "),o("span",{staticClass:"main-color text-11"},[t._v(t._s(t.company.auctionBy.province))])])]),t._v(" "),o("div",{staticClass:"d-inline-flex main-black pt-10px pb-10px"},[o("div",{staticClass:"star-rate mr-1"},[t._v("\n                            5.0\n                        ")]),t._v(" "),t._l(4,(function(t,e){return[o("div",{key:e+10,staticClass:"group-star"},[o("i",{staticClass:"fas fa-star mr-1px f-13 main-yellow"})])]})),t._v(" "),t._m(0)],2),t._v(" "),o("div",{staticClass:"text-11 color-grey"},[o("span",[t._v("Chi phí ước tính -\n                            "),o("span",{staticClass:"fw-600 main-color text-13"},[t._v("\n                                "+t._s(t.formatNamePrice(3===t.company.step?t.company.deal[0].price:t.company.price))+"\n                            ")])]),t._v(" "),o("span",{staticClass:"px-11px"},[t._v(" | ")]),t._v(" "),o("span",[t._v("Thời gian thi công -\n                            "),o("span",{staticClass:"fw-600 main-color text-13"},[t._v("\n                                "+t._s(3===t.company.step?t.company.deal[0].day:t.company.day)+" ngày\n                            ")])])])])])]),t._v(" "),o("div",{staticClass:"col-md-6 col-sm-12 content-right"},[t.company.deal.length?o("div",{staticClass:"d-flex"},[o("span",{staticClass:"description"},[t._v("\n                    "+t._s(t.company.deal[0].message)+"\n                ")])]):t._e(),t._v(" "),t.company.deal.length&&t.company.deal[0].attachments?o("div",[t._l(t.company.deal[0].attachments,(function(e,n){return[o("p",{key:n,staticClass:"f-11 text-main "},[o("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e))}}),t._v("\n                        "+t._s(t.spliceURLFile(e,"--"))+"\n                    ")])]}))],2):t._e(),t._v(" "),o("div",{staticClass:"list-payment"},[t.company.deal.length?o("ul",t._l(t.company.deal[0].payments,(function(e,n){return o("li",{key:n},[o("span",[t._v("Thanh toán đợt "+t._s(n+1))]),t._v(" - "),o("span",{staticClass:"text-main"},[t._v(t._s(e.value))])])})),0):t._e()]),t._v(" "),t._m(1)])]),t._v(" "),o("DetailPaymentCompany",{attrs:{auction:t.company,detailProject:t.detailProject},on:{getPageAgain:t.getPageAgain}})],1)}),o,!1,null,null,null);e.default=component.exports;installComponents(component,{DetailPaymentCompany:n(516).default})}}]);