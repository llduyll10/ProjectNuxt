(window.webpackJsonp=window.webpackJsonp||[]).push([[30,21,23],{401:function(t,e,n){"use strict";n.r(e);n(9),n(22),n(21),n(63),n(96),n(2);var r={props:["accept","multiple","label","isChat"],created:function(){},mounted:function(){},data:function(){return{showAlert:!1}},methods:{onFileChange:function(){var t=[],e=this.$refs.file.files,n=this.accept;if(e&&e.length)var r=e[0].name.split(".").pop();if(n){if(!n.includes(r))return void(this.showAlert=!0);this.showAlert=!1,e.forEach((function(e){t.push(e)})),this.$emit("input",this.multiple?t:t[0]),this.$refs.file.value=null}}}},o=n(41),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",[r("input",{ref:"file",staticClass:"inputfile",class:t.isChat?"w-40":"",attrs:{type:"file",multiple:t.multiple},on:{change:t.onFileChange}}),t._v(" "),r("label",{class:t.isChat?"bg-white mb-0":"",on:{click:function(e){return t.$refs.file.click()}}},[t.isChat?[r("img",{attrs:{src:n(402),alt:""}})]:[r("img",{staticClass:"mr-4px h-13px mb-2px",attrs:{src:n(403),alt:""}}),t._v("\n            "+t._s(t.label)+"\n        ")]],2),t._v(" "),t.isChat?t._e():r("span",{staticClass:"text-main f-11 font-italic"},[t._l(t.accept,(function(e,n){return[t._v("\n           "+t._s(e)+" "),n+1<t.accept.length?r("span",{key:n},[t._v(",")]):t._e()]}))],2),t._v(" "),t.showAlert?r("small",{staticClass:"text-danger d-block"},[t._v("Sai định dạng")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},402:function(t,e,n){t.exports=n.p+"img/file.0c843c8.svg"},403:function(t,e,n){t.exports=n.p+"img/icon-upload.762d37f.svg"},423:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(5),n(6);var r=n(0),o=n(19);n(53),n(10),n(9),n(16),n(1),n(21),n(2);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:["objInfor","isModal"],data:function(){return{objProject:this.restForm(),options:this.getCategory(),optionsProvince:this.getProvince(),place:"1. Mô tả chi tiết về dự án xây dựng hoặc yêu cầu thiết kế của bạn \n2. Vui lòng đính kèm sổ đỏ, bản vẽ, thiết kế hoặc hình ảnh minh hoạ để nhận được tư vấn/dự toán tốt nhất. \n3. Yêu cầu năng lực của đơn vị báo giá hoặc những yêu cầu khác",acceptImg:["png","jpg","jpeg","tiff"],acceptFile:["png","jpg","jpeg","tiff","pdf","xls","doc","ppt","zip","rar"],arrFileImg:[],arrBase64:[],arrFile:[],currentStatus:""}},mounted:function(){this.isModal?this.objInfor&&(this.objProject=this.objInfor,console.log("this.objProject",this.objProject)):this.getProjectDraft()},methods:{triggerCalendar:function(){this.$refs.calendar.showPopover()},restForm:function(){return this.arrFileImg=[],this.arrBase64=[],this.arrFile=[],{category:[],dueDate:(new Date).getTime(),agree:!1}},createJobActive:function(s){this.currentStatus=s,this.$refs.btnClick.click()},createJobDraft:function(s){this.currentStatus=s,this.$refs.btnClick.click()},createJob:function(){var t=this;return Object(o.a)(regeneratorRuntime.mark((function e(){var n,r,o,c,m,f,d,h;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.currentStatus,t.loader(),e.prev=2,r=t.objProject.photos||[],!t.arrFileImg.length){e.next=10;break}return e.next=7,t.uploadFile(t.arrFileImg);case 7:e.t0=e.sent,e.next=11;break;case 10:e.t0=[];case 11:if(o=e.t0,c=r.concat(o),m=t.objProject.attachment||[],!t.arrFile.length){e.next=20;break}return e.next=17,t.uploadFile(t.arrFile);case 17:e.t1=e.sent,e.next=21;break;case 20:e.t1=[];case 21:return f=e.t1,d=m.concat(f),e.next=25,t.$post("member/projects",l(l({},t.objProject),{},{status:n,photos:c,attachment:d}));case 25:h=e.sent,"ACTIVE"!==n||t.isModal||(t.objProject=t.restForm(),t.$router.replace("/du-an/".concat(h.data.project.slug))),"DRAFT"===n&&(t.objProject._id=h.data.project._id),t.isModal&&(t.$emit("callGetDetail"),t.$emit("hideModal")),t.$notify({group:"all",text:t.isModal?"Cập nhật dự án thành công":"Tạo dự án thành công",type:"dark"}),t.loader(0),e.next=36;break;case 33:e.prev=33,e.t2=e.catch(2),t.loader(0);case 36:case"end":return e.stop()}}),e,null,[[2,33]])})))()},getProjectDraft:function(){var t=this;this.$get("member/projects/draft").then((function(e){e.data.status&&(t.objProject=e.data.project)})).catch((function(t){console.log("getProjectDraft",t)}))},callParent:function(){this.$emit("hideModal")},getFile:function(t){this.arrFile=this.arrFile.concat(t)},clearFile:function(t){this.arrFile=this.arrFile.filter((function(e){return e.name!==t.name}))},clearFileOld:function(t){this.objProject.attachment=this.objProject.attachment.filter((function(e){return e!==t}))},getFileImg:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.arrFileImg=e.arrFileImg.concat(t),r=[],e.arrFileImg.forEach(function(){var t=Object(o.a)(regeneratorRuntime.mark((function t(n){var o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e._toBase64(n);case 2:o=t.sent,r.push({base64:o,name:n.name});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),e.arrBase64=r;case 4:case"end":return n.stop()}}),n)})))()},clearFileImg:function(t){this.arrBase64=this.arrBase64.filter((function(e){return e.base64!==t.base64})),this.arrFileImg=this.arrFileImg.filter((function(e){return e.name!==t.name}))},clearFileImgOld:function(t){this.objProject.photos=this.objProject.photos.filter((function(e){return e!==t}))}}},f=n(41),component=Object(f.a)(m,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("p",{staticClass:"title f-20 mb-10px"},[t._v(t._s(t.isModal?"Chỉnh sửa dự án":"Thông tin dự án"))]),t._v(" "),t._m(0),t._v(" "),n("form",{ref:"fromProject",staticClass:"group-content mt-36px",on:{submit:function(e){return e.preventDefault(),t.createJob()}}},[n("div",{staticClass:"form-group row align-items-center"},[t._m(1),t._v(" "),n("treeselect",{staticClass:"pl-0 pr-0 col-md-9 col-sm-12",attrs:{options:t.options,"disable-branch-nodes":!0,value:t.objProject.category,multiple:!0,required:"",placeholder:"Chọn dịch vụ",clearable:!1},model:{value:t.objProject.category,callback:function(e){t.$set(t.objProject,"category",e)},expression:"objProject.category"}})],1),t._v(" "),n("div",{staticClass:"form-group row align-items-center"},[t._m(2),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.objProject.name,expression:"objProject.name"}],staticClass:"form-control col-md-9 col-sm-12",attrs:{type:"text",required:"",placeholder:"Nhập tên dự án của bạn"},domProps:{value:t.objProject.name},on:{input:function(e){e.target.composing||t.$set(t.objProject,"name",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group row align-items-center"},[t._m(3),t._v(" "),n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objProject.description,expression:"objProject.description"}],staticClass:"form-control col-md-9 col-sm-12",attrs:{required:"",id:"customPlaceholder",rows:"5",placeholder:t.place},domProps:{value:t.objProject.description},on:{input:function(e){e.target.composing||t.$set(t.objProject,"description",e.target.value)}}})]),t._v(" "),n("div",{staticClass:"form-group row align-items-center mb-10px"},[n("label",{staticClass:"f-13  col-md-3 col-sm-12 "},[t._v("\n                Hình ảnh đính kèm\n            ")]),t._v(" "),n("div",{staticClass:"col-md-9 pl-0"},[n("InputFile",{key:"file",ref:"akjklak",attrs:{accept:t.acceptFile,multiple:!0,label:"Thêm hình ảnh"},on:{input:t.getFileImg}})],1),t._v(" "),n("div",{staticClass:"col-md-3"}),t._v(" "),n("div",{staticClass:"col-md-9 pl-0"},[t.objProject.attachment?[t._l(t.objProject.photos,(function(e,r){return[n("p",{key:r,staticClass:"f-11 text-main "},[n("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e,"--"))}}),t._v("\n                            "+t._s(t.spliceURLFile(e,"--"))+"\n                            "),n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFileImgOld(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])]}))]:t._e(),t._v(" "),t.arrBase64.length?[t._l(t.arrBase64,(function(e,r){return[n("p",{key:r,staticClass:"f-11 text-main "},[n("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e.name))}}),t._v("\n                            "+t._s(e.name)+"\n                            "),n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFileImg(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])]}))]:t._e()],2)]),t._v(" "),n("div",{staticClass:"form-group row align-items-center"},[n("label",{staticClass:"f-13  col-md-3 col-sm-12 "},[t._v("\n                Tài liệu đính kèm\n            ")]),t._v(" "),n("div",{staticClass:"col-md-9 pl-0"},[n("InputFile",{key:"file",ref:"akjklak",attrs:{accept:t.acceptFile,multiple:!0,label:"Thêm tài liệu"},on:{input:t.getFile}})],1),t._v(" "),n("div",{staticClass:"col-md-3"}),t._v(" "),n("div",{staticClass:"col-md-9 pl-0"},[t.objProject.attachment?[t._l(t.objProject.attachment,(function(e,r){return[n("p",{key:r,staticClass:"f-11 text-main "},[n("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e))}}),t._v("\n                            "+t._s(t.spliceURLFile(e,"--"))+"\n                            "),n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFileOld(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])]}))]:t._e(),t._v(" "),t.arrFile.length?[t._l(t.arrFile,(function(e,r){return[n("p",{key:r,staticClass:"f-11 text-main "},[n("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e.name))}}),t._v("\n                            "+t._s(e.name)+"\n                            "),n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFile(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])]}))]:t._e()],2)]),t._v(" "),n("div",{staticClass:"form-group row align-items-center"},[t._m(4),t._v(" "),n("treeselect",{staticClass:"pl-0 pr-0 col-md-9 col-sm-12",attrs:{options:t.optionsProvince,value:t.objProject.address,placeholder:"Tỉnh thành",required:"",clearable:!1},model:{value:t.objProject.address,callback:function(e){t.$set(t.objProject,"address",e)},expression:"objProject.address"}})],1),t._v(" "),n("div",{staticClass:"form-group row align-items-center"},[t._m(5),t._v(" "),n("div",{staticClass:"input-group col-md-9 col-sm-12 px-0"},[n("currency-input",{staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"200,000,000"},model:{value:t.objProject.budget,callback:function(e){t.$set(t.objProject,"budget",e)},expression:"objProject.budget"}}),t._v(" "),t._m(6)],1)]),t._v(" "),n("div",{staticClass:"form-group row align-items-center"},[t._m(7),t._v(" "),n("v-date-picker",{ref:"calendar",attrs:{masks:{input:"DD/MM/YYYY"},"model-config":{type:"number"}},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.inputValue,o=e.inputEvents;return[n("div",{staticClass:"input-group mb-3"},[n("input",t._g({staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:r}},o)),t._v(" "),n("div",{staticClass:"input-group-append cursor-pointer",on:{click:function(e){return t.triggerCalendar()}}},[n("span",{staticClass:"input-group-text custom-time"},[n("i",{staticClass:"fas fa-calendar-day"})])])])]}}]),model:{value:t.objProject.dueDate,callback:function(e){t.$set(t.objProject,"dueDate",e)},expression:"objProject.dueDate"}})],1),t._v(" "),n("div",{staticClass:"form-group mb-50px group-checkbox d-flex"},[n("b-form-checkbox",{attrs:{checked:t.objProject.agree,name:"checkbox-agree",required:""},model:{value:t.objProject.agree,callback:function(e){t.$set(t.objProject,"agree",e)},expression:"objProject.agree"}}),t._v(" "),t._m(8)],1),t._v(" "),n("div",{staticClass:"group-btn row"},[n("button",{ref:"btnClick",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),n("div",{staticClass:"col-md-6 col-sm-12"},[n("button",{staticClass:"btn-now",attrs:{type:"button"},on:{click:function(e){return t.createJobActive("ACTIVE")}}},[t._v("\n                    "+t._s(t.isModal?"CẬP NHẬT THÔNG TIN":"ĐĂNG NGAY")+"\n                ")])]),t._v(" "),n("div",{staticClass:"col-md-6 col-sm-12 pr-0 cutom-sm"},[t.isModal?n("button",{staticClass:"btn-now delete",attrs:{type:"button"},on:{click:t.callParent}},[t._v("\n                    HUỶ BỎ\n                ")]):n("button",{staticClass:"btn-now save",attrs:{type:"button"},on:{click:function(e){return t.createJobDraft("DRAFT")}}},[t._v("\n                    LƯU BẢN NHÁP\n                ")])])])])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"f-13 description"},[t._v("Vui lòng điền vào thông tin dưới đây. Bạn sẽ nhận được "),n("span",[t._v("8-10")]),t._v("  chào giá tạm tính từ những công ty xây dựng/đơn vị thiết kế uy tín trong khu vực. Bạn thoà sức "),n("span",[t._v("\n        yêu cầu tư vấn")]),t._v("  và "),n("span",[t._v("chọn lựa")]),t._v(" đơn vị phù hợp nhất cho dự án")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                Dịch vụ yêu cầu\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                Tên Dự Án\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                Mô tả Yêu Cầu Về Công Việc\n\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                Địa điểm dự án\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                Ngân sách dự trù\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text f-12"},[t._v("VND")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                Thời gian kết thúc nhận chào giá\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"f-12 main-black mt-2px ml-5px"},[t._v("Tôi đồng ý với "),n("span",{staticClass:"main-color"},[t._v("điều khoản")]),t._v(" của Econs "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{InputFile:n(401).default})},520:function(t,e,n){"use strict";n.r(e);var r={data:function(){return{objInfor:null}},mounted:function(){},methods:{getInfor:function(t){this.objInfor=t},show:function(){this.$refs.inforProject.showModal()},hide:function(){this.$refs.inforProject.hideModal()},getDetailProject:function(){this.$emit("callGetDetail")}}},o=n(41),component=Object(o.a)(r,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"inforProject",attrs:{id:"modal-infor-project"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"formCore"},[n("div",{staticClass:"content"},[n("FormProject",{attrs:{objInfor:t.objInfor,isModal:!0},on:{hideModal:t.hide,callGetDetail:t.getDetailProject}})],1)])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{FormProject:n(423).default,Modal:n(253).default})}}]);