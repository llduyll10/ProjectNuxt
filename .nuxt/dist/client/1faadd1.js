(window.webpackJsonp=window.webpackJsonp||[]).push([[68,23],{401:function(t,e,n){"use strict";n.r(e);n(9),n(22),n(21),n(63),n(96),n(2);var o={props:["accept","multiple","label","isChat"],created:function(){},mounted:function(){},data:function(){return{showAlert:!1}},methods:{onFileChange:function(){var t=[],e=this.$refs.file.files,n=this.accept;if(e&&e.length)var o=e[0].name.split(".").pop();if(n){if(!n.includes(o))return void(this.showAlert=!0);this.showAlert=!1,e.forEach((function(e){t.push(e)})),this.$emit("input",this.multiple?t:t[0]),this.$refs.file.value=null}}}},r=n(41),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("input",{ref:"file",staticClass:"inputfile",class:t.isChat?"w-40":"",attrs:{type:"file",multiple:t.multiple},on:{change:t.onFileChange}}),t._v(" "),o("label",{class:t.isChat?"bg-white mb-0":"",on:{click:function(e){return t.$refs.file.click()}}},[t.isChat?[o("img",{attrs:{src:n(402),alt:""}})]:[o("img",{staticClass:"mr-4px h-13px mb-2px",attrs:{src:n(403),alt:""}}),t._v("\n            "+t._s(t.label)+"\n        ")]],2),t._v(" "),t.isChat?t._e():o("span",{staticClass:"text-main f-11 font-italic"},[t._l(t.accept,(function(e,n){return[t._v("\n           "+t._s(e)+" "),n+1<t.accept.length?o("span",{key:n},[t._v(",")]):t._e()]}))],2),t._v(" "),t.showAlert?o("small",{staticClass:"text-danger d-block"},[t._v("Sai định dạng")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},402:function(t,e,n){t.exports=n.p+"img/file.0c843c8.svg"},403:function(t,e,n){t.exports=n.p+"img/icon-upload.762d37f.svg"},476:function(t,e,n){t.exports=n.p+"img/CheckboxBig.bda5924.svg"},509:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(5),n(2),n(6);var o=n(19),r=n(0);n(53),n(159),n(10),n(1),n(21);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(r.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var m={props:["id","quoteName","detailProject"],data:function(){return{place:"1. Mô tả chi tiết về dự án xây dựng hoặc yêu cầu thiết kế của bạn \n2. Vui lòng đính kèm sổ đỏ, bản vẽ, thiết kế hoặc hình ảnh minh hoạ để nhận được tư vấn/dự toán tốt nhất. \n3. Yêu cầu năng lực của đơn vị báo giá hoặc những yêu cầu khác",objForm:{agree:!1},accepFile:["png","jpg","tiff","pdf","xls","doc","ppt","zip","rar"],arrFile:[],isShowForm:!1,isUpdateQuote:!1}},mounted:function(){this.getQuote()},methods:{getQuote:function(){var t=this;this.$auth&&this.$auth.user&&this.$auth.user.canAuction?this.$get("member/auction/project/".concat(this.id)).then((function(e){e.data.status&&(e.data.auction?"DRAFT"==e.data.auction.status?(t.objForm=l({},e.data.auction),t.isShowForm=!0):1===e.data.auction.step&&e.data.auction.survey.length&&"DRAFT"==e.data.auction.statusUpdate?(t.objForm=l(l({},e.data.auction),{},{payments:e.data.auction.payments.length?e.data.auction.payments:[{key:1,value:0}]}),t.isShowForm=!0,t.isUpdateQuote=!0):t.isShowForm=!1:t.isShowForm=!0)})).catch((function(t){console.log(t)})):this.isShowForm=!1},createQuote:function(t){var e=this;return Object(o.a)(regeneratorRuntime.mark((function n(){var o,r,c,m;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e.loader(),n.prev=1,!e.arrFile.length){n.next=8;break}return n.next=5,e.uploadFile(e.arrFile);case 5:n.t0=n.sent,n.next=9;break;case 8:n.t0=[];case 9:return o=n.t0,r=l(l({},e.objForm),{},{day:Number(e.objForm.day),attachments:o,projectOwner:e.detailProject.createBy._id}),console.log(r),c="member/auction/project/".concat(e.id),e.isUpdateQuote?(r.statusUpdate=t,r.step=2):r.status=t,n.next=16,e.$post(c,r);case 16:m=n.sent,console.log("res",m),e.resetForm(),e.getQuote(),e.loader(0),e.$emit("callGetList"),e.$auth.fetchUser(),n.next=29;break;case 25:n.prev=25,n.t1=n.catch(1),console.log(n.t1),e.loader(0);case 29:case"end":return n.stop()}}),n,null,[[1,25]])})))()},resetForm:function(){this.objForm={},this.arrFile=[]},getFile:function(t){this.arrFile=this.arrFile.concat(t)},clearFile:function(t){this.arrFile=this.arrFile.filter((function(e){return e.name!==t.name}))},addPayment:function(){var t={key:this.objForm.payments.length,value:0};this.objForm.payments.push(t)},clearPayment:function(t){1!=this.objForm.payments.length&&(this.objForm.payments=this.objForm.payments.filter((function(e){return e.key!=t.key})))}}},h=n(41),component=Object(h.a)(m,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.isShowForm?o("div",[o("h3",{staticClass:"h5 main-black f-14 fw-700"},[t.isUpdateQuote?[t._v("\n            Cập nhật chào giá cho dự án\n        ")]:[t._v("\n            Gửi chào giá cho dự án - Bạn sẽ tốn\n            "),t._m(0),t._v(" khi tham gia chào giá\n        ")]],2),t._v(" "),o("hr",{staticClass:"hr"}),t._v(" "),o("form",{staticClass:"group-content",on:{submit:function(e){return e.preventDefault(),t.createQuote("ACTIVE")}}},[o("div",{staticClass:"form-group row mb-25px align-items-center"},[t._m(1),t._v(" "),o("div",{staticClass:" col-md-9 col-sm-12"},[o("div",{staticClass:"input-group"},[o("currency-input",{staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"200,000,000"},model:{value:t.objForm.price,callback:function(e){t.$set(t.objForm,"price",e)},expression:"objForm.price"}}),t._v(" "),t._m(2)],1),t._v(" "),t._m(3)])]),t._v(" "),o("div",{staticClass:"form-group row mb-25px align-items-center"},[o("label",{staticClass:"f-13 col-md-3 col-sm-12 fw-600"},[t._v("\n                "+t._s(t.isUpdateQuote?"Giải pháp đề xuất và lý do tại sao báo giá lại cao/thấp hơn giá ước lượng ban đầu":"Kinh nghiệm, Năng lực và giải pháp đề xuất")+"\n\n                "),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("div",{staticClass:"col-md-9 col-sm-12"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objForm.description,expression:"objForm.description"}],staticClass:"form-control main-black ",attrs:{required:"",id:"customPlaceholder",rows:"5",placeholder:t.place},domProps:{value:t.objForm.description},on:{input:function(e){e.target.composing||t.$set(t.objForm,"description",e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"form-group row mb-25px align-items-center"},[t._m(4),t._v(" "),o("div",{staticClass:"col-md-3 col-sm-12 "},[o("div",{staticClass:"input-group"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.objForm.day,expression:"objForm.day"}],staticClass:"form-control ",attrs:{type:"text"},domProps:{value:t.objForm.day},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||t.$set(t.objForm,"day",e.target.value)}}}),t._v(" "),t._m(5)])])]),t._v(" "),t.isUpdateQuote?[t._l(t.objForm.payments,(function(e,n){return[o("div",{key:n,staticClass:"form-group row mb-25px align-items-center"},[o("label",{staticClass:"f-13 col-md-3 col-sm-12 fw-600"},[t._v("\n                        Thanh toán đợt "+t._s(n+1)+"\n                        "),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("div",{staticClass:" col-md-9 col-sm-12 d-flex"},[o("div",{staticStyle:{width:"200px"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:e.value,expression:"item.value"}],staticClass:"form-control",attrs:{type:"text",required:"",placeholder:"200,000,000"},domProps:{value:e.value},on:{input:function(n){n.target.composing||t.$set(e,"value",n.target.value)}}})]),t._v(" "),1==t.objForm.payments.length?[o("span",{staticClass:"ml-10px mt-7px text-main f-12 cursor-pointer",on:{click:function(n){return t.addPayment(e)}}},[t._v("Thêm đề nghị thanh toán")])]:[n+1==t.objForm.payments.length?[o("span",{staticClass:"ml-10px mt-7px text-main f-12 cursor-pointer",on:{click:function(n){return t.addPayment(e)}}},[t._v("Thêm đề nghị thanh toán")])]:[o("span",{staticClass:"text-red mt-3px ml-5px cursor-pointer",on:{click:function(n){return t.clearPayment(e)}}},[o("i",{staticClass:"fas fa-times"})])]]],2)])]}))]:t._e(),t._v(" "),o("div",{staticClass:"form-group row mb-25px align-items-center"},[o("label",{staticClass:"f-13 col-md-3 col-sm-12 fw-600"},[t._v("\n                Tài liệu đính kèm\n            ")]),t._v(" "),o("div",{staticClass:"col-md-9 col-sm-12"},[o("InputFile",{attrs:{accept:t.accepFile,multiple:!0,label:"Thêm tài liệu"},on:{input:t.getFile}}),t._v(" "),t.arrFile.length?o("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.arrFile.length?o("div",{staticClass:"col-md-9 pl-0"},[t._l(t.arrFile,(function(e,n){return[o("p",{key:n,staticClass:"f-11 text-main "},[o("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e.name))}}),t._v("\n                            "+t._s(e.name)+"\n                            "),o("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFile(e)}}},[o("i",{staticClass:"fas fa-times text-red"})])])]}))],2):t._e()],1)]),t._v(" "),o("div",{staticClass:"form-group mb-50px group-checkbox d-flex"},[o("b-form-checkbox",{attrs:{name:"checkbox-agree",required:""},model:{value:t.objForm.agree,callback:function(e){t.$set(t.objForm,"agree",e)},expression:"objForm.agree"}}),t._v(" "),t._m(6)],1),t._v(" "),o("div",{staticClass:"group-btn"},[o("div",{staticClass:"d-flex mt-25px justify-content-xl-around row"},[o("div",{staticClass:"col-md-6 col-sm-12"},[o("button",{staticClass:" btn btn-primary main-bg-color radius-5 w-100  text-16 fw-700",attrs:{type:"submit"}},[t._v("\n                    "+t._s(t.isUpdateQuote?"CẬP NHẬT BÁO GIÁ":"GỬI CHÀO GIÁ NGAY")+"\n                ")])]),t._v(" "),o("div",{staticClass:"col-md-6 col-sm-12"},[o("button",{staticClass:" btn btn-primary main-bg-color radius-5 w-100  btn-brown text-16 pr-0 fw-700",attrs:{type:"button"},on:{click:function(e){return t.createQuote("DRAFT")}}},[t._v("\n                    LƯU BẢN NHÁP\n                ")])])])])],2)]):o("div",[o("div",{staticClass:"text-center"},[o("img",{attrs:{src:n(476)}}),t._v(" "),t.$auth.loggedIn&&t.$auth.user.canAuction?o("p",{staticClass:"f-19 main-black fw-600"},[t._v("Bạn đã gửi chào giá cho\n            "),o("span",{staticClass:"text-main"},[t._v(t._s(t.quoteName))])]):t._e(),t._v(" "),t.$auth.loggedIn?t._e():o("p",{staticClass:"f-19 main-black fw-600"},[t._v("\n            Vui lòng đăng nhập để chào giá\n        ")]),t._v(" "),t.$auth.loggedIn&&!t.$auth.user.canAuction?o("p",{staticClass:"f-19 main-black fw-600"},[t._v("\n            Vui lòng hoàn thành hồ sơ và xác thực tài khoản\n        ")]):t._e()])])}),[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"main-color"},[n("span",{staticClass:"f-20"},[t._v("3")]),t._v(" Tokens")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 fw-600"},[t._v("\n                Chi phí ước tính\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text f-12"},[t._v("VND")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",{staticClass:"mb-0 mt-5px f-12 main-black"},[t._v("\n                    Phí hoa hồng nếu trúng thầu -\n                    "),n("span",{staticClass:"main-color fw-600"},[t._v("500")]),t._v(" "),n("span",{staticClass:"fw-600"},[t._v("Tokens")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"f-13 col-md-3 col-sm-12 fw-600 mb-0"},[t._v("\n                Thời gian thi công dự trù\n                "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text py-0 px-10px f-12"},[t._v("Ngày")])])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"f-12 main-black mt-2px ml-5px"},[t._v("Tôi đồng ý với "),n("span",{staticClass:"main-color"},[t._v("điều khoản")]),t._v(" của Econs "),n("span",{staticStyle:{color:"red"}},[t._v("*")])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{InputFile:n(401).default})}}]);