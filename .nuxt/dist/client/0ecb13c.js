(window.webpackJsonp=window.webpackJsonp||[]).push([[43,40],{419:function(t,e,o){"use strict";o.r(e);var n={props:["objConfirm"],methods:{show:function(){console.log("objProject",this.objConfirm),this.$refs.popupSurveyContact.showModal()},hide:function(){this.$refs.popupSurveyContact.hideModal()}}},r=o(41),component=Object(r.a)(n,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("Modal",{ref:"popupSurveyContact",attrs:{id:"modal-survey-contact"},scopedSlots:t._u([{key:"content",fn:function(){return[t.objConfirm?o("div",{staticClass:"modal-contact formCore"},[o("div",{staticClass:"content"},[o("p",{staticClass:"title f-14"},[t._v("\n            Bạn đã xác nhận yêu cầu khảo sát của khách hàng "),o("span",{staticClass:"text-main"},[t._v(t._s(t.objConfirm.name))]),t._v(". Nếu có thay đổi về thời gian và địa điểm, vui lòng liên hệ trực tiếp với khách.\n        ")]),t._v(" "),o("div",{staticClass:"group-infor"},[o("div",{staticClass:"row mb-15px"},[o("div",{staticClass:"col-md-3"},[o("span",{staticClass:"key"},[t._v("Họ Tên:")])]),t._v(" "),o("div",{staticClass:"col-md-9"},[o("span",{staticClass:"value text-red"},[t._v(t._s(t.objConfirm.name))])])]),t._v(" "),o("div",{staticClass:"row mb-15px"},[o("div",{staticClass:"col-md-3"},[o("span",{staticClass:"key"},[t._v("Số điện thoại:")])]),t._v(" "),o("div",{staticClass:"col-md-9"},[o("span",{staticClass:"value"},[t._v(t._s(t.objConfirm.phone))])])]),t._v(" "),o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-3"},[o("span",{staticClass:"key"},[t._v("Địa chỉ Email:")])]),t._v(" "),o("div",{staticClass:"col-md-9"},[o("span",{staticClass:"value"},[t._v(t._s(t.objConfirm.email))])])])]),t._v(" "),o("div",{staticClass:"footer"},[o("div",{staticClass:"btn-confirm",on:{click:function(e){return t.hide()}}},[o("span",[t._v("HOÀN TẤT")])])])])]):t._e()]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:o(253).default})},424:function(t,e,o){"use strict";o.r(e);o(4),o(3),o(1),o(5),o(2),o(6);var n=o(0),r=o(19);o(53);function c(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(object);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,o)}return e}function l(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?c(Object(source),!0).forEach((function(e){Object(n.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):c(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var d={props:["detailProject","rawCategory","objProject"],data:function(){return{objResearch:{agree:!1,agreeSurvey:!1,date:(new Date).getTime()},objInfor:null,arrFile:[],accepFile:["png","jpg","jpeg","tiff","pdf","xls","doc","ppt","zip","rar"],options:this.getCategory(),date:new Date,statusConfirm:"",objConfirm:null,placeholder:"1. Mô tả chi tiết về dự án xây dựng hoặc yêu cầu thiết kế của bạn\n2. Vui lòng đính kèm sổ đỏ, bản vẽ, thiết kế hoặc hình ảnh minh hoạ để nhận được tư vấn/dự toán tốt nhất.\n3. Yêu cầu năng lực của đơn vị báo giá hoặc những yêu cầu khác"}},mounted:function(){this.objProject&&(this.objResearch=this.objProject.survey[0])},methods:{sendMessage:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var o,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.loader(),!t.arrFile.length){e.next=8;break}return e.next=5,t.uploadFile(t.arrFile);case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=[];case 9:if(o=e.t0,n=l(l({},t.objResearch),{},{attachments:o,project:t.detailProject._id,auction:t.objProject._id}),"CONFIRM"!=t.statusConfirm){e.next=20;break}return e.next=14,t.$post("member/survey/confirmed",n);case 14:r=e.sent,t.$emit("getListParent"),t.objConfirm=r.data.auction.projectOwner,t.showSurveyContact(),e.next=24;break;case 20:return e.next=22,t.$post("member/survey/destroy",n);case 22:e.sent,t.$emit("getListParent");case 24:t.loader(0),t.hide(),window.location.reload(),e.next=33;break;case 29:e.prev=29,e.t1=e.catch(0),console.log(e.t1),t.loader(0);case 33:case"end":return e.stop()}}),e,null,[[0,29]])})))()},sendSurvey:function(t){this.statusConfirm=t,this.$refs.btnClick.click()},getInforPerchant:function(t){this.objInfor=t},show:function(){this.$refs.popupSurvey.showModal(),console.log("this.company",this.company)},hide:function(){this.$refs.popupSurvey.hideModal()},showSurveyContact:function(){this.$refs.surveyContact.show()},hideSurveyContact:function(){this.$refs.surveyContact.hide()}}},v=o(41),component=Object(v.a)(d,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Modal",{ref:"popupSurvey",attrs:{id:"modal-survey"},scopedSlots:t._u([{key:"content",fn:function(){return[t.objInfor?o("div",{staticClass:"modal-contact formCore"},[o("div",{staticClass:"content"},[o("p",{staticClass:"title f-16 isCancel pr-60px"},[t._v("\n                        Khách hàng "),o("span",{staticClass:"text-main"},[t._v(t._s(t.objInfor.name))]),t._v(" đã chọn bạn khảo sát hiện trạng và gửi báo giá cuối cùng. Bạn sẽ tốn "),o("span",{staticClass:"text-main"},[t._v("12 Tokens")]),t._v(" khi xác nhận tham gia khảo sát và báo giá\n                    ")]),t._v(" "),o("form",{staticClass:"group-content mt-20px",on:{submit:function(e){return e.preventDefault(),t.sendMessage()}}},[o("div",{staticClass:"form-group row"},[o("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                                Tên dự án\n                            ")]),t._v(" "),o("span",{staticClass:"col-md-9 col-sm-12 pl-0 name-project",class:t.getClassCategory(t.mapImgFromCategory(t.rawCategory))},[t._v("\n                                "+t._s(t.detailProject.name)+"\n                            ")])]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                                Soạn tin nhắn\n                                "),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objResearch.message,expression:"objResearch.message"}],staticClass:"form-control col-md-9 col-sm-12",attrs:{required:"",id:"customPlaceholder",rows:"5",placeholder:t.placeholder,readonly:!0},domProps:{value:t.objResearch.message},on:{input:function(e){e.target.composing||t.$set(t.objResearch,"message",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                                    Địa điểm khảo sát\n                                    "),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.objResearch.address,expression:"objResearch.address"}],staticClass:"form-control col-md-9 col-sm-12",attrs:{type:"text",placeholder:"Nhập địa chỉ công trình",required:"",readonly:!0},domProps:{value:t.objResearch.address},on:{input:function(e){e.target.composing||t.$set(t.objResearch,"address",e.target.value)}}})]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"f-13 col-md-3 col-sm-12 "},[t._v("\n                                    Thời gian khảo sát\n                                    "),o("span",{staticStyle:{color:"red"}},[t._v("*")])]),t._v(" "),o("div",{staticClass:"d-flex"},[[o("div",{staticClass:"input-group custom-input-calendar",staticStyle:{"min-width":"170px"}},[o("input",{staticClass:"form-control",attrs:{type:"text",readonly:"",required:""},domProps:{value:t.$moment(t.objResearch.date).format("DD/MM/YYYY")}}),t._v(" "),o("div",{staticClass:"input-group-append"},[o("span",{staticClass:"input-group-text custom-time disabled"},[o("i",{staticClass:"fas fa-calendar-day"})])])])],t._v(" "),o("input",{directives:[{name:"model",rawName:"v-model",value:t.objResearch.time,expression:"objResearch.time"}],staticClass:"ml-20px form-control",attrs:{type:"time",readonly:!0},domProps:{value:t.objResearch.time},on:{input:function(e){e.target.composing||t.$set(t.objResearch,"time",e.target.value)}}})],2)]),t._v(" "),o("div",{staticClass:"form-group row"},[o("label",{staticClass:"f-13  col-md-3 col-sm-12 mt-1"},[t._v("\n                                Tài liệu đính kèm\n                            ")]),t._v(" "),o("div",{staticClass:"col-md-9 col-sm-12 pl-0"},[t.arrFile.length?o("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.arrFile.length?o("div",{staticClass:"col-md-9 pl-0"},[t._l(t.arrFile,(function(e,n){return[o("p",{key:n,staticClass:"f-11 text-main "},[o("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e.name))}}),t._v("\n                                                "+t._s(e.name)+"\n                                            ")])]}))],2):t._e(),t._v(" "),t.objProject.survey[0]&&t.objProject.survey[0].attachments?o("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.objProject.survey[0]&&t.objProject.survey[0].attachments?o("div",{staticClass:"col-md-9 pl-0"},[t._l(t.objProject.survey[0].attachments,(function(e,n){return[o("p",{key:n,staticClass:"f-11 text-main "},[o("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e))}}),t._v("\n                                                "+t._s(t.spliceURLFile(e,"--"))+"\n                                            ")])]}))],2):t._e()])]),t._v(" "),o("div",{staticClass:"form-group  group-checkbox d-flex"},[o("b-form-checkbox",{attrs:{name:"checkbox-agree-survey",required:""},model:{value:t.objResearch.agree,callback:function(e){t.$set(t.objResearch,"agree",e)},expression:"objResearch.agree"}}),t._v(" "),o("span",{staticClass:"f-12 main-black mt-2px ml-5px"},[t._v("Tôi đồng ý với "),o("span",{staticClass:"main-color"},[t._v("điều khoản")]),t._v(" của Econs "),o("span",{staticStyle:{color:"red"}},[t._v("*")])])],1),t._v(" "),o("div",{staticClass:"form-group  group-checkbox d-flex"},[o("b-form-checkbox",{attrs:{name:"checkbox-agree",required:""},model:{value:t.objResearch.agreeSurvey,callback:function(e){t.$set(t.objResearch,"agreeSurvey",e)},expression:"objResearch.agreeSurvey"}}),t._v(" "),o("span",{staticClass:"f-12 main-black mt-2px ml-5px"},[t._v("Tôi đồng ý khảo sát hiện trạng và sẽ  "),o("span",{staticClass:"text-red"},[t._v(" cập nhật báo giá trong vòng 24 giờ ")]),t._v(" sau khi khảo sát "),o("span",{staticStyle:{color:"red"}},[t._v("*")])])],1),t._v(" "),o("div",{staticClass:"group-btn row"},[t.$auth.loggedIn?o("div",{staticClass:"col-md-12 d-flex"},[o("button",{ref:"btnClick",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),o("button",{staticClass:"btn-now mr-15px",attrs:{type:"button"},on:{click:function(e){return t.sendSurvey("CONFIRM")}}},[t._v("\n                                XÁC NHẬN KHẢO SÁT\n                                ")]),t._v(" "),o("button",{staticClass:"btn-now delete",attrs:{type:"button"},on:{click:function(e){return t.sendSurvey("CANCEL")}}},[t._v("\n                                    TỪ CHỐI YÊU CẦU KHẢO SÁT\n                                ")])]):o("div",{staticClass:"col-md-12"},[o("button",{staticClass:"btn-now",attrs:{type:"button"},on:{click:function(e){return t.hide()}}},[t._v("\n                                    VUI LÒNG ĐĂNG NHẬP\n                                ")])])])])])]):t._e()]},proxy:!0}])}),t._v(" "),o("PopupSurveyContact",{ref:"surveyContact",attrs:{objConfirm:t.objConfirm}})],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:o(253).default,PopupSurveyContact:o(419).default})}}]);