(window.webpackJsonp=window.webpackJsonp||[]).push([[19,23,35,36],{401:function(t,e,n){"use strict";n.r(e);n(9),n(22),n(21),n(63),n(96),n(2);var o={props:["accept","multiple","label","isChat"],created:function(){},mounted:function(){},data:function(){return{showAlert:!1}},methods:{onFileChange:function(){var t=[],e=this.$refs.file.files,n=this.accept;if(e&&e.length)var o=e[0].name.split(".").pop();if(n){if(!n.includes(o))return void(this.showAlert=!0);this.showAlert=!1,e.forEach((function(e){t.push(e)})),this.$emit("input",this.multiple?t:t[0]),this.$refs.file.value=null}}}},r=n(41),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("input",{ref:"file",staticClass:"inputfile",class:t.isChat?"w-40":"",attrs:{type:"file",multiple:t.multiple},on:{change:t.onFileChange}}),t._v(" "),o("label",{class:t.isChat?"bg-white mb-0":"",on:{click:function(e){return t.$refs.file.click()}}},[t.isChat?[o("img",{attrs:{src:n(402),alt:""}})]:[o("img",{staticClass:"mr-4px h-13px mb-2px",attrs:{src:n(403),alt:""}}),t._v("\n            "+t._s(t.label)+"\n        ")]],2),t._v(" "),t.isChat?t._e():o("span",{staticClass:"text-main f-11 font-italic"},[t._l(t.accept,(function(e,n){return[t._v("\n           "+t._s(e)+" "),n+1<t.accept.length?o("span",{key:n},[t._v(",")]):t._e()]}))],2),t._v(" "),t.showAlert?o("small",{staticClass:"text-danger d-block"},[t._v("Sai định dạng")]):t._e()])}),[],!1,null,null,null);e.default=component.exports},402:function(t,e,n){t.exports=n.p+"img/file.0c843c8.svg"},403:function(t,e,n){t.exports=n.p+"img/icon-upload.762d37f.svg"},405:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTciIGhlaWdodD0iMTciIHZpZXdCb3g9IjAgMCAxNyAxNyIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTYuMzQzNjYgMTUuMzQwN0wwIDguOTk2NTZMMy4wMjU0NyA1Ljk3MTA5TDYuMzQzNjYgOS4yODkyOEwxMy45NzQ1IDEuNjU4OTRMMTcgNC42ODQ0TDYuMzQzNjYgMTUuMzQwN1oiIGZpbGw9IiMxOThBQzYiLz4KPC9zdmc+Cg=="},415:function(t,e){t.exports="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTUiIGhlaWdodD0iMTUiIHZpZXdCb3g9IjAgMCAxNSAxNSIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTAgMTIuMjA3M0w0LjcwNzM2IDcuNDk5OTZMMCAyLjc5MjY4TDIuNzkyNjggMEw3LjUwMDA0IDQuNzA3MzZMMTIuMjA3MyAwTDE1IDIuNzkyNjhMMTAuMjkyNiA3LjUwMDA0TDE1IDEyLjIwNzNMMTIuMjA3MyAxNUw3LjQ5OTk2IDEwLjI5MjZMMi43OTI2IDE1TDAgMTIuMjA3M1oiIGZpbGw9IiNEODAwMDAiLz4KPC9zdmc+Cg=="},447:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(1),n(5),n(2),n(6);var o=n(0);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}var c={props:["project","activeRow","auction"],data:function(){return{objPayment:{}}},methods:{sendRequirePayment:function(){console.log("sendRequirePayment",this.objPayment),this.$emit("requiredPayment",this.objPayment),this.hide()},updateObjectRequired:function(t){this.objPayment=function(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}({},t)},triggerForm:function(t){this.objPayment.status="DONE"==t?"DONE":"CANCEL",this.$refs.btnSubmit.click()},show:function(){this.$refs.createRequired.showModal()},hide:function(){this.$refs.createRequired.hideModal()}}},l=n(41),component=Object(l.a)(c,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"createRequired",attrs:{id:"modal-payment-required"},scopedSlots:t._u([{key:"content",fn:function(){return[t.auction?n("div",{staticClass:"modal-contact formCore"},[n("div",{staticClass:"content"},[n("p",{staticClass:"title f-20 fw-600"},[n("span",{staticClass:"text-main"},[t._v(t._s(t.auction.auctionBy.company))]),t._v(" GỬI YÊU CẦU THANH TOÁN ĐỢT "+t._s(t.activeRow+1)+"\n        ")]),t._v(" "),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.sendRequirePayment()}}},[n("div",{staticClass:"group-infor no-border pr-60px"},[n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên dự án")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("span",{staticClass:"value",class:t.getClassCategory(t.mapImgFromCategory(t.project.category))},[t._v("\n                            "+t._s(t.project.name)+"\n                        ")])])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhân viên yêu cầu")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameStaff,expression:"objPayment.nameStaff"}],staticClass:"form-control",attrs:{readonly:"",type:"text",required:""},domProps:{value:t.objPayment.nameStaff},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameStaff",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Giá trị thanh toán")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("div",{staticClass:"input-group "},[n("currency-input",{staticClass:"form-control",attrs:{type:"text",required:"",readonly:""},model:{value:t.objPayment.price,callback:function(e){t.$set(t.objPayment,"price",e)},expression:"objPayment.price"}}),t._v(" "),n("div",{staticClass:"input-group-append"},[n("span",{staticClass:"input-group-text f-12"},[t._v("VND")])])],1)])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Ghi chú thanh toán")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.note,expression:"objPayment.note"}],staticClass:"form-control",attrs:{readonly:"",type:"text",required:"",rows:"5"},domProps:{value:t.objPayment.note},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"note",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên ngân hàng")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameBank,expression:"objPayment.nameBank"}],staticClass:"form-control",attrs:{readonly:"",type:"text",required:""},domProps:{value:t.objPayment.nameBank},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameBank",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên chủ tài khoản")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameAccountBank,expression:"objPayment.nameAccountBank"}],staticClass:"form-control",attrs:{readonly:"",type:"text",required:""},domProps:{value:t.objPayment.nameAccountBank},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameAccountBank",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Số tài khoản")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.accountNumber,expression:"objPayment.accountNumber"}],staticClass:"form-control",attrs:{readonly:"",type:"text",required:""},domProps:{value:t.objPayment.accountNumber},on:{keypress:function(e){return t.isNumber(e)},input:function(e){e.target.composing||t.$set(t.objPayment,"accountNumber",e.target.value)}}})])])]),t._v(" "),t.objPayment&&"DONE"!=t.objPayment.status?n("div",{staticClass:"footer d-flex"},[n("button",{ref:"btnSubmit",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),n("div",{staticClass:"btn-confirm flex-1",on:{click:function(e){return t.triggerForm("DONE")}}},[n("span",[t._v("XÁC NHẬN THANH TOÁN")])]),t._v(" "),n("div",{staticClass:"btn-confirm cancel flex-1 ml-25px",on:{click:function(e){return t.triggerForm("CANCEL")}}},[n("span",[t._v("TỪ CHỐI THANH TOÁN")])])]):t._e()])])]):t._e()]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Modal:n(253).default})},448:function(t,e,n){"use strict";n.r(e);n(10),n(1),n(21);var o={props:["project"],data:function(){return{acceptFile:["png","jpg","jpeg","tiff"],objPayment:{},arrFile:[]}},methods:{getForm:function(){console.log("getForm",this.objPayment)},triggerForm:function(t){this.$refs.btnSubmitReport.click()},getFile:function(t){this.arrFile=this.arrFile.concat(t)},clearFile:function(t){this.arrFile=this.arrFile.filter((function(e){return e.name!==t.name}))},show:function(){this.$refs.modalCreateReport.showModal()},hide:function(){this.$refs.modalCreateReport.hideModal()}}},r=n(41),component=Object(r.a)(o,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("Modal",{ref:"modalCreateReport",attrs:{id:"modal-payment-report"},scopedSlots:t._u([{key:"content",fn:function(){return[n("div",{staticClass:"modal-contact formCore"},[n("div",{staticClass:"content"},[n("p",{staticClass:"title f-20 fw-600"},[t._v("\n            TẠO BÁO CÁO TIẾN ĐỘ THI CÔNG\n        ")]),t._v(" "),n("form",{attrs:{action:""},on:{submit:function(e){return e.preventDefault(),t.getForm()}}},[n("div",{staticClass:"group-infor no-border pr-60px"},[n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Tên dự án")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("span",{staticClass:"value text-red",class:t.getClassCategory(t.mapImgFromCategory(t.project.category))},[t._v("\n                            "+t._s(t.project.name)+"\n                        ")])])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhân viên báo cáo")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.nameStaff,expression:"objPayment.nameStaff"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.nameStaff},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"nameStaff",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-15px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Thời gian")]),t._v(" "),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.time,expression:"objPayment.time"}],staticClass:"form-control",attrs:{type:"text",required:""},domProps:{value:t.objPayment.time},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"time",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row mb-25px"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Nhật ký công việc")]),n("span",{staticClass:"text-red"},[t._v("*")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.objPayment.note,expression:"objPayment.note"}],staticClass:"form-control",attrs:{type:"text",required:"",rows:"5"},domProps:{value:t.objPayment.note},on:{input:function(e){e.target.composing||t.$set(t.objPayment,"note",e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"row"},[n("div",{staticClass:"col-md-3"},[n("span",{staticClass:"key"},[t._v("Hình ảnh đính kèm")])]),t._v(" "),n("div",{staticClass:"col-md-9"},[n("InputFile",{key:"file",attrs:{accept:t.acceptFile,multiple:!0,label:"Thêm hình ảnh"},on:{input:t.getFile}}),t._v(" "),t.arrFile.length?n("div",{staticClass:"col-md-3"}):t._e(),t._v(" "),t.arrFile.length?n("div",{staticClass:"col-md-9 pl-0"},[t._l(t.arrFile,(function(e,o){return[n("p",{key:o,staticClass:"f-11 text-main "},[n("span",{staticClass:"mr-5px",domProps:{innerHTML:t._s(t.returnTypeFile(e.name))}}),t._v("\n                                    "+t._s(e.name)+"\n                                    "),n("span",{staticClass:"cursor-pointer ml-5px",on:{click:function(n){return t.clearFile(e)}}},[n("i",{staticClass:"fas fa-times text-red"})])])]}))],2):t._e()],1)])]),t._v(" "),n("div",{staticClass:"footer d-flex"},[n("button",{ref:"btnSubmitReport",staticClass:"d-none",attrs:{type:"submit"}}),t._v(" "),n("div",{staticClass:"btn-confirm flex-1",on:{click:function(e){return t.triggerForm("CREATE")}}},[n("span",[t._v("TẠO BÁO CÁO THI CÔNG")])]),t._v(" "),n("div",{staticClass:"btn-confirm update flex-1 ml-25px",on:{click:function(e){return t.triggerForm("DRAFT")}}},[n("span",[t._v("LƯU BẢN NHÁP")])])])])])])]},proxy:!0}])})}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{InputFile:n(401).default,Modal:n(253).default})},512:function(t,e,n){"use strict";n.r(e);n(4),n(3),n(1),n(5),n(6);var o=n(0);n(2);function r(object,t){var e=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(object,t).enumerable}))),e.push.apply(e,n)}return e}function c(t){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?r(Object(source),!0).forEach((function(e){Object(o.a)(t,e,source[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(source)):r(Object(source)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(source,e))}))}return t}var l={props:["auction","detailProject"],data:function(){return{statusPayment:1,activeRow:0,arrRequiredPayment:[]}},mounted:function(){this.getPaymentByAuction()},methods:{getObjRequiredPayment:function(t){var e=this,n=c(c({},t),{},{paymentId:n?n.paymentId:this.activeRow,project:this.auction.deal[0].project,auction:this.auction.deal[0].auction});this.loader(),this.$post("member/payments",n).then((function(t){var n={project:e.auction.deal[0].project,auction:e.auction.deal[0].auction};return e.$post("member/payments-by-auction",n)})).then((function(t){e.arrRequiredPayment=t.data,e.auction.deal[0].payments.forEach((function(t){return delete t.paymentAuction})),e.mapAuction(),e.loader(0)})).catch((function(t){e.loader(0)}))},getPaymentByAuction:function(){var t=this,e={project:this.auction.deal[0].project,auction:this.auction.deal[0].auction};this.$post("member/payments-by-auction",e).then((function(e){t.arrRequiredPayment=e.data,t.mapAuction()})).catch((function(t){console.log(t)}))},mapAuction:function(){var t=JSON.parse(JSON.stringify(this.auction.deal[0].payments))||[],e=this.arrRequiredPayment;t.forEach((function(t,n){e.forEach((function(e){n==e.paymentId&&"DRAFT"!=e.status&&"CANCEL"!=e.status&&(t.paymentAuction=e)}))})),this.auction.deal[0].payments=t},openModalRequired:function(t){this.$refs.customerCreateRequired.show(),this.$refs.customerCreateRequired.updateObjectRequired({}),this.activeRow=t},openModalRequiredUpdate:function(t,e){this.activeRow=e,this.$refs.customerCreateRequired.updateObjectRequired(t),this.$refs.customerCreateRequired.show()},openModalReport:function(){this.$refs.customerCreateReport.show()},hideModal:function(){this.$refs.customerCreateRequired.hide()}}},m=n(41),component=Object(m.a)(l,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return t.auction?o("div",{staticClass:"detail-payment-component"},[o("div",{staticClass:"group-payment"},[o("p",{staticClass:"fw-600 f-16 mb-16px"},[t._v("Thanh toán")]),t._v(" "),t._l(t.auction.deal[0].payments,(function(e,r){return o("div",{key:r,staticClass:"d-flex"},[o("span",{staticClass:"item",staticStyle:{width:"15%"}},[t._v("Thanh toán đợt "+t._s(r+1))]),t._v(" "),o("span",{staticClass:"item text-center fw-600",staticStyle:{width:"25%"}},[t._v(t._s(e.value))]),t._v(" "),t.arrRequiredPayment&&e.paymentAuction?o("span",{staticClass:"item text-center text-underline fw-600 text-main cursor-pointer",staticStyle:{width:"20%","text-decoration":"underline"},on:{click:function(n){return t.openModalRequiredUpdate(e.paymentAuction,r)}}},[t._v("\n                Đề nghị thanh toán_Đợt "+t._s(r+1)+"\n            ")]):o("span",{staticClass:"item text-center cursor-pointer main-black",staticStyle:{width:"20%"}},[t._v("\n                Chưa có đề nghị thanh toán\n            ")]),t._v(" "),t.arrRequiredPayment&&e.paymentAuction?o("span",{staticClass:"item text-center fw-600 text-main",staticStyle:{width:"20%"},on:{click:function(e){return t.openModalReport()}}},[t._v("\n                "+t._s(t.formatVnd(e.paymentAuction.price))+" VND\n            ")]):o("span",{staticClass:"item",staticStyle:{width:"20%"},on:{click:function(e){return t.openModalReport()}}}),t._v(" "),t.arrRequiredPayment&&e.paymentAuction&&"DRAFT"!=e.paymentAuction.status&&"CANCEL"!=e.paymentAuction.status?["DONE"==e.paymentAuction.status?o("span",{staticClass:"item fw-600 text-main",staticStyle:{width:"20%"}},[o("img",{attrs:{src:n(405),alt:""}}),t._v(" Đã thanh toán\n                ")]):"PENDING"==e.paymentAuction.status?o("span",{staticClass:"item fw-600 text-red",staticStyle:{width:"20%"}},[o("img",{staticClass:"mb-2px",attrs:{src:n(415),alt:""}}),t._v(" Chưa thanh toán\n                ")]):t._e()]:[o("span",{staticClass:"item",staticStyle:{width:"20%"}})]],2)}))],2),t._v(" "),o("div",{staticClass:"group-progress"},[o("p",{staticClass:"fw-600 f-16 mt-25px mb-16px"},[t._v("Báo cáo tiến độ")]),t._v(" "),t._l(t.auction.deal[0].payments,(function(e,n){return o("div",{key:n,staticClass:"d-flex"},[o("span",{staticClass:"item",staticStyle:{width:"15%"}},[t._v(t._s(n+1)+". Tuần "+t._s(n+1))]),t._v(" "),o("span",{staticClass:"item text-center fw-600",staticStyle:{width:"25%"}},[t._v("Tiến độ thi công tuần thứ "+t._s(n+1))]),t._v(" "),o("span",{staticClass:"item d-flex",staticStyle:{width:"60%"}},[t._v("\n                Đánh giá:\n                "),o("div",{staticClass:"group-star"},t._l(5,(function(t,e){return o("i",{key:e+10,staticClass:"fas fa-star mr-1px f-13 main-yellow"})})),0)])])}))],2),t._v(" "),o("PopupPaymentCustomerCreateRequired",{ref:"customerCreateRequired",attrs:{project:t.detailProject,activeRow:t.activeRow,auction:t.auction},on:{requiredPayment:t.getObjRequiredPayment}}),t._v(" "),o("PopupPaymentCustomerCreateReport",{ref:"customerCreateReport",attrs:{project:t.detailProject}})],1):t._e()}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{PopupPaymentCustomerCreateRequired:n(447).default,PopupPaymentCustomerCreateReport:n(448).default})}}]);